<!--
 * @Author: jiangh<jiangh@southzn.com>
 * @Date: 2021-03-15 16:04:36
 * @LastEditors: jiangh<jiangh@southzn.com>
 * @LastEditTime: 2021-04-07 15:28:14
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas width="512" height="256"></canvas>
</body>
<!-- <script src="vector2d.js" ></script> -->
<script type="module">
  import {Vector2D} from "./vector2d.js";
  {
/*
context 是我们的 Canvas2D 上下文
v0是起始向量
length 是当前树枝的长度
thickness 是当前树枝的粗细
dir 是当前树枝的方向，用与 x 轴的夹角表示，单位是弧度。
bias 是一个随机偏向因子，用来让树枝的朝向有一定的随机性
*/
function drawBranch(context, v0, length, thickness, dir, bias) {
  
 const v = new Vector2D(1, 0).rotate(dir).scale(length);
 const v1 = v0.copy().add(v);

 
 if(thickness > 2) {
    const left = dir + 0.2;
    drawBranch(context, v1, length * 0.9, thickness * 0.8, left, bias * 0.9);
    const right = dir - 0.2;
    drawBranch(context, v1, length * 0.9, thickness * 0.8, right, bias * 0.9);
  }

  /* 具体的操作 */
}

    const ctx = document.querySelector('canvas').getContext('2d');

    drawBranch(ctx, new Vector2D(1, 0), 20, 0, 0.05)
  }
</script>
</html>