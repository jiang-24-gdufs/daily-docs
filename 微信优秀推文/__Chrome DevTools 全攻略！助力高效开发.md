[toc]

## Chrome DevTools å…¨æ”»ç•¥ï¼åŠ©åŠ›é«˜æ•ˆå¼€å‘

## Console é¢æ¿

> æ­¤ç« èŠ‚è¯·æ‰“å¼€ justwe7.github.io/devtools/console/console.html ä¸€èµ·é£Ÿç”¨
>
> ä¸€æ–¹é¢ç”¨æ¥è®°å½•é¡µé¢åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ï¼ˆä¸€èˆ¬é€šè¿‡å„ç§ console è¯­å¥æ¥å®ç°ï¼‰ï¼Œå¦ä¸€æ–¹é¢ç”¨æ¥å½“åš shell çª—å£æ¥æ‰§è¡Œè„šæœ¬ä»¥åŠä¸é¡µé¢æ–‡æ¡£ã€DevTools ç­‰è¿›è¡Œäº¤äº’

ç»„åˆå¿«æ·é”®æŒ‰é”®:
Windows: `Control` + `Shift` + `J`
Mac: `Command` + `Option` + `J`

é¦–å…ˆçœ‹ä¸€ä¸‹ console å¯¹è±¡ä¸‹é¢éƒ½æœ‰å“ªäº›æ–¹æ³•:
![img](./imgs/chrome_devtools_1.png)

### console.clear()

é¡¾åæ€ä¹‰ï¼Œæ¸…ç©ºæ§åˆ¶å°

### console.log(), info(), warn(), error()

æ—¥å¸¸ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯è¿™å‡ ä¸ªäº†ï¼Œå…¶ä¸­ `log` å’Œ `info`ï¼Œå°è±¡ä¸­åœ¨ 2016 å¹´ä¹‹å‰è€ç”¨ info æ‰“å°ï¼Œè¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ`info` è¾“å‡ºçš„å†…å®¹å‰é¢æ˜¯æœ‰ä¸€ä¸ªè“è‰²èƒŒæ™¯çš„å°åœˆ, å¤§æ¦‚è·Ÿè¿™ä¸ªå·®ä¸å¤š: iï¼Œåæ¥ chrome æ›´æ–°å°±æ²¡äº†(IE è¿˜æ˜¯å¯ä»¥çœ‹å‡ºå·®åˆ«çš„)

```
console.log('æ™®é€šä¿¡æ¯')
console.info('æç¤ºæ€§ä¿¡æ¯')
console.error('é”™è¯¯ä¿¡æ¯')
console.warn('è­¦ç¤ºä¿¡æ¯')
```

![img](./imgs/chrome_devtools_2.png)

**ä½¿ç”¨å ä½ç¬¦**

```
// æ”¯æŒé€—å·åˆ†éš”å‚æ•°ï¼Œä¸éœ€è¦æ¯ä¸ªå‚æ•°éƒ½å•ç‹¬æ‰“å°
console.log(1, '2', +'3')
// å ä½ç¬¦
// %s 
console.log('ä»Šæ™š%s è€è™', 'æ‰“', 'ï¼Ÿï¼Ÿï¼Ÿ')
// %c 
console.log('ä»Šæ™š%s%c è€è™', 'æ‰“', 'color: red', 'ï¼Ÿï¼Ÿï¼Ÿ')
// å¸¦æœ‰å ä½ç¬¦çš„å‚æ•°ä¹‹åçš„è‹¥å¹²å‚æ•°å±äºå ä½ç¬¦çš„é…ç½®å‚æ•°
```

![img](./imgs/chrome_devtools_3.png)

å…¶ä½™çš„å ä½ç¬¦åˆ—è¡¨è¿˜æœ‰ï¼š

| å ä½ç¬¦ | åŠŸèƒ½           |
| :----- | :------------- |
| %s     | å­—ç¬¦ä¸²         |
| %d     | æ•´æ•°           |
| %i     | æ•´æ•°           |
| %f     | æµ®ç‚¹æ•°         |
| %o     | å¯¹è±¡çš„é“¾æ¥     |
| %c     | css æ ¼å¼å­—ç¬¦ä¸² |

### console.time(), timeEnd()

`time` å’Œ `timeEnd` ä¸€èˆ¬æ”¾åœ¨ä¸€èµ·ç”¨ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ç”¨æ¥æ ‡è¯†èµ·å§‹ä½ç½®ç”¨äºç»Ÿè®¡æ—¶é—´:

```
console.time('t')
Array(900000).fill({}).forEach((v, index) => v.index = index)
console.timeEnd('t')
// t: 28.18603515625ms
```

ä¼šæ‰“å°å‡ºä¸­é—´ä»£ç çš„æ‰§è¡Œæ—¶é—´

### console.count()

é¡¾åæ€ä¹‰ã€‚ã€‚è®¡æ•°,å¯ä»¥ç”¨æ¥ç»Ÿè®¡æŸä¸ªå‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ ¹æ®ä¼ å…¥çš„å‚æ•°åˆ†ç»„ç»Ÿè®¡è°ƒç”¨çš„æ¬¡æ•°

```
function foo(type = '') {
  type ? console.count(type) : console.count()
  return 'typeï¼š' + type
}

foo('A') //A: 1
foo('B') //B: 1
foo()    //default: 1
foo()    //default: 2
foo()    //default: 3
foo('A') //A: 2
```

### console.trace()

ç”¨äºè¿½è¸ªä»£ç çš„è°ƒç”¨æ ˆï¼Œä¸ç”¨ä¸“é—¨æ–­ç‚¹å»çœ‹äº†

```
console.trace()
function foo() {
  console.trace()
}
foo()
```

![img](./imgs/chrome_devtools_4.png)

### console.table()

console.table()æ–¹æ³•å¯ä»¥å°†å¤åˆç±»å‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤º

```
var arr = [
  { name: 'æ¢…è¥¿', qq: 10 },
  { name: 'C ç½—', qq: 7 },
  { name: 'å†…é©¬å°”', qq: 11 },
]
console.table(arr)
```

![img](./imgs/chrome_devtools_5.png)

### console.dir()

æŒ‰ä¾¿äºé˜…è¯»å’Œæ‰“å°çš„å½¢å¼å°†å¯¹è±¡æ‰“å°

```
var obj = {
  name: 'justwe7',
  age: 26,
  fn: function () {
    alert('justwe7')
  },
}
console.log(obj)
console.dir(obj)
```

![img](./imgs/chrome_devtools_6.png)

æ‰“å° DOM å¯¹è±¡åŒºåˆ«ï¼š
![img](./imgs/chrome_devtools_7.png)

### console.assert()

æ–­è¨€ï¼Œç”¨æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚å½“è¡¨è¾¾å¼ä¸º false æ—¶ï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¸ä¼šä¸­æ–­ç¨‹åºæ‰§è¡Œã€‚

> å¯ä»¥ç”¨äºæç¤ºç”¨æˆ·ï¼Œå†…éƒ¨çŠ¶æ€ä¸æ­£ç¡®ï¼ˆæŠŠé‚£ä¸ªè¯´å‡è¯çš„æªå‡ºæ¥ï¼‰

```
var val = 1
console.assert(val === 1, 'ç­‰äº 1')
console.assert(val !== 1, 'ä¸ç­‰äº 1')
console.log('ä»£ç å¾€ä¸‹æ‰§è¡Œå‘¢å•Š')
```

![img](./imgs/chrome_devtools_8.png)

### console.group(), groupEnd()

åˆ†ç»„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥ç”¨é¼ æ ‡æŠ˜å /å±•å¼€

```
console.group('åˆ†ç»„ 1')
console.log('åˆ†ç»„ 1-1111')
console.log('åˆ†ç»„ 1-2222')
console.log('åˆ†ç»„ 1-3333')
console.groupEnd()
console.group('åˆ†ç»„ 2')
console.log('åˆ†ç»„ 2-1111')
console.log('åˆ†ç»„ 2-2222')
console.log('åˆ†ç»„ 2-3333')
console.groupEnd()
```

![img](./imgs/chrome_devtools_9.png)

### `$` é€‰æ‹©å™¨

#### `$_`

å¯ä»¥è®°å½•ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼Œç›´æ¥ç”¨äºä»£ç æ‰§è¡Œ:

![img](./imgs/chrome_devtools_10.gif)

#### `$0,$1...$4`

ä»£è¡¨æœ€è¿‘ 5 ä¸ªå®¡æŸ¥å…ƒç´ **é€‰ä¸­**è¿‡çš„ DOM èŠ‚ç‚¹ï¼Œçœ‹å›¾ï¼ˆæ˜¯è¦é€‰ä¸­ä¸€ä¸‹ï¼Œæˆ‘æ›´å–œæ¬¢ç”¨å­˜å‚¨å…¨å±€å˜é‡çš„æ–¹å¼ç©ï¼Œçœçš„è‡ªå·±æ‰‹æ®‹åˆé€‰äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼š

![img](./imgs/chrome_devtools_11.gif)

#### `$å’Œ$$`

- `$(selector)`æ˜¯åŸç”Ÿ document.querySelector() çš„å°è£…ã€‚
- `$$(selector)`è¿”å›çš„æ˜¯æ‰€æœ‰æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„å…ƒç´ çš„ä¸€ä¸ªé›†åˆï¼Œæ˜¯ document.querySelectorAll() çš„å°è£…

#### $x

å°†æ‰€åŒ¹é…çš„èŠ‚ç‚¹æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œè¿”å›

```
<ul>
  <ul>
    <li><p>li ä¸‹çš„ p1</p></li>
    <li><p>li ä¸‹çš„ p2</p></li>
    <li><p>li ä¸‹çš„ p3</p></li>
  </ul>
</ul>
<p>å¤–é¢çš„ p</p>
$x('//li') // æ‰€æœ‰çš„ li
$x('//p') // æ‰€æœ‰çš„ p
$x('//li//p') // æ‰€æœ‰çš„ li ä¸‹çš„ p
$x('//li[p]') // æ‰€æœ‰çš„ li ä¸‹çš„ p
```

![img](./imgs/chrome_devtools_12.png)

#### keys(), values()

è·Ÿ ES6 å¯¹è±¡æ‰©å±•æ–¹æ³•ï¼Œ `Object.keys()` å’Œ `Object.values()` ç›¸åŒ

```
keys(obj);
values(obj);
```

#### copy()

å¯ä»¥ç›´æ¥å°†å˜é‡å¤åˆ¶åˆ°å‰ªè´´æ¿

```
copy(temp1)
```

ä¸ `Save global variable` ç»“åˆä½¿ç”¨ç¥å™¨

## Element é¢æ¿

> æ­¤ç« èŠ‚è¯·æ‰“å¼€ justwe7.github.io/devtools/element/element.html ä¸€èµ·é£Ÿç”¨
>
> åœ¨ Elements é¢æ¿ä¸­å¯ä»¥é€šè¿‡ DOM æ ‘çš„å½¢å¼æŸ¥çœ‹æ‰€æœ‰é¡µé¢å…ƒç´ ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¯¹è¿™äº›é¡µé¢å…ƒç´ è¿›è¡Œæ‰€è§å³æ‰€å¾—çš„ç¼–è¾‘

ç»„åˆå¿«æ·é”®æŒ‰é”®:
Windows: `Control` + `Shift` + `C`
Mac: `Command` + `Option` + `C`

### css è°ƒè¯•

#### style

é€‰ä¸­ç›®æ ‡èŠ‚ç‚¹ï¼Œelement é¢ç‰ˆï¼ŒæŸ¥çœ‹ style->:hov,é€‰æ‹©å¯¹åº”çš„çŠ¶æ€å³å¯

1. 

![img](./imgs/chrome_devtools_13.png)

1. 

![img](./imgs/chrome_devtools_14.gif)

#### computed

æœ‰æ—¶å€™æ ·å¼è¦†ç›–è¿‡å¤šï¼ŒæŸ¥çœ‹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œ`computed` å°±æ´¾ä¸Šç”¨åœºäº†

![img](./imgs/chrome_devtools_15.png)

> ç‚¹å‡»æŸä¸ªæ ·å¼å¯ä»¥ç›´æ¥è·³è½¬è‡³å¯¹åº” css å®šä¹‰

#### è°ƒæ•´æŸä¸ªå…ƒç´ çš„æ•°å€¼

é€‰ä¸­æƒ³è¦æ›´æ”¹çš„å€¼ï¼ŒæŒ‰æ–¹å‘é”®ä¸Šä¸‹å°±å¯ä»¥ `+ / -` 1 ä¸ªå•ä½çš„å€¼

> `alt + æ–¹å‘é”®` å¯ä»¥ Ã—10 è°ƒæ•´å•ä½å€¼
> `Ctrl + æ–¹å‘é”®` å¯ä»¥ Ã—100 è°ƒæ•´å•ä½å€¼
> `shift + æ–¹å‘é”®` å¯ä»¥ /10 è°ƒæ•´å•ä½

### html è°ƒè¯•

#### éªšæ“ä½œ

é€‰ä¸­èŠ‚ç‚¹ï¼Œç›´æ¥æŒ‰é”®ç›˜ `H` å¯ä»¥ç›´æ¥è®©å…ƒç´ æ˜¾ç¤º/éšè—ï¼Œä¸ç”¨æ‰‹åŠ¨æ•²æ ·å¼äº†ï¼Œæ•ˆæœç­‰åŒ `visibility: hidden`ï¼Œè¿˜æ˜¯è¦å æ®ç›’æ¨¡å‹ç©ºé—´çš„ã€‚ï¼ˆè®°å¾—æŠŠè¾“å…¥æ³•æ”¹æˆè‹±æ–‡~ï¼‰

![img](./imgs/chrome_devtools_16.gif)

#### å°†æŸä¸ªå…ƒç´ å­˜å‚¨åˆ°å…¨å±€ä¸´æ—¶å˜é‡ä¸­

é€‰ä¸­èŠ‚ç‚¹ï¼Œå³é”®ï¼Œ`Store as global variable`ï¼ˆåœ¨ network é¢æ¿ä¸­ä¹Ÿèƒ½ç”¨ï¼Œå°¤å…¶æ˜¯ç­›é€‰æ¥å£çš„è¿”å›å€¼å¾ˆæ–¹ä¾¿ï¼‰

![img](./imgs/chrome_devtools_17.gif)

#### æ»šåŠ¨åˆ°æŸä¸ªèŠ‚ç‚¹

å¦‚æœé¡µé¢å¾ˆé•¿ï¼Œæƒ³æ‰¾ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹çš„æ˜¾ç¤ºä½ç½®åˆä¸æƒ³æ‰‹åŠ¨æ»‘åŠ¨å¯ä»¥è¯•è¯• `Scroll into view`

![img](./imgs/chrome_devtools_18.gif)

#### Edge ä¸“å±çš„ 3D è§†å›¾

ä½¿ç”¨ chromium åçš„ Edge çœŸçš„æ˜¯æ”¹å¤´æ¢é¢ï¼Œ**3D è§†å›¾**å¯ä»¥å¸®å¿™å®šä½ä¸€äº›å®šä½å±‚çº§è¿˜æœ‰ DOM åµŒå¥—çš„é—®é¢˜ï¼Œé¡µé¢ç»“æ„å†™çš„å¥½ä¸å¥½çœ‹å¾ˆç›´è§‚çš„å¯ä»¥çœ‹å‡ºæ¥(è·Ÿè¾…åŠ©åŠŸèƒ½é‡Œé¢çš„ dom æ ‘ç»“åˆä½¿ç”¨å¾ˆèˆ’æœ)

![img](./imgs/chrome_devtools_19.gif)

ç›®å‰ chrome è¿˜æ˜¯æ²¡æœ‰è¿™é¡¹åŠŸèƒ½çš„ï¼ŒEdge æ‰“å¼€ä½ç½®ï¼šæ§åˆ¶å°æ‰“å¼€çŠ¶æ€ => `Esc`æ‰“å¼€æŠ½å±‰ => `Â·Â·Â·`é€‰æ‹© 3D è§†å›¾é¢æ¿

### DOM æ–­ç‚¹

å¯ä»¥ç›‘å¬åˆ° DOM èŠ‚ç‚¹çš„å˜æ›´(å­èŠ‚ç‚¹å˜åŠ¨/å±æ€§å˜æ›´/å…ƒç´ ç§»é™¤)ï¼Œå¹¶æ–­ç‚¹è‡³å˜æ›´ DOM çŠ¶æ€çš„ js ä»£ç è¡Œï¼š

![img](./imgs/chrome_devtools_20.gif)

## Network é¢æ¿

> å¯ä»¥æŸ¥çœ‹é€šè¿‡ç½‘ç»œè¯·æ±‚çš„èµ„æºçš„ç›¸å…³è¯¦ç»†ä¿¡æ¯

ç»„åˆå¿«æ·é”®æŒ‰é”®:
Windows: `Control` + `Shift` + `I`
Mac: `Command` + `Option` + `I`

æŒ‰åŒºåŸŸåˆ’åˆ†å¤§æ¦‚åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªåŒºåŸŸï¼š
![img](./imgs/chrome_devtools_21.png)

1. `Controls` - æ§åˆ¶ Network åŠŸèƒ½é€‰é¡¹ï¼Œä»¥åŠä¸€äº›å±•ç¤ºå¤–è§‚

2. `Filters` - æ§åˆ¶åœ¨ Requests Table ä¸­æ˜¾ç¤ºå“ªäº›ç±»å‹çš„èµ„æº

   > tipsï¼šæŒ‰ä½ Cmd (Mac) æˆ– Ctrl (Windows/Linux) å¹¶ç‚¹å‡»ç­›é€‰é¡¹å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªç­›é€‰é¡¹

3. `Overview` - æ­¤å›¾è¡¨æ˜¾ç¤ºäº†èµ„æºæ£€ç´¢æ—¶é—´çš„æ—¶é—´çº¿ã€‚å¦‚æœçœ‹åˆ°å¤šæ¡ç«–çº¿å †å åœ¨ä¸€èµ·ï¼Œåˆ™è¯´æ˜è¿™äº›èµ„æºè¢«åŒæ—¶æ£€ç´¢

4. `Requests Table` - æ­¤è¡¨æ ¼åˆ—å‡ºäº†æ£€ç´¢çš„æ¯ä¸€ä¸ªèµ„æºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤è¡¨æ ¼æŒ‰æ—¶é—´é¡ºåºæ’åºï¼Œæœ€æ—©çš„èµ„æºåœ¨é¡¶éƒ¨ã€‚ç‚¹å‡»èµ„æºçš„åç§°å¯ä»¥æ˜¾ç¤ºæ›´å¤šä¿¡æ¯ã€‚ æç¤ºï¼šå³é”®ç‚¹å‡» Timeline ä»¥å¤–çš„ä»»ä½•ä¸€ä¸ªè¡¨æ ¼æ ‡é¢˜å¯ä»¥æ·»åŠ æˆ–ç§»é™¤ä¿¡æ¯åˆ—

5. `Summary` - å¯ä»¥ä¸€ç›®äº†ç„¶åœ°çœ‹åˆ°é¡µé¢çš„è¯·æ±‚æ€»æ•°ã€ä¼ è¾“çš„æ•°æ®æ€»é‡ã€åŠ è½½æ—¶é—´

### ï¼ˆ1ã€2ï¼‰Controlsï¼ŒFilters åŒºåŸŸ

![img](./imgs/chrome_devtools_22.png)

Filters æ§åˆ¶çš„å±•ç¤ºï¼š

- **ä½¿ç”¨å¤§è¯·æ±‚è¡Œ** - é»˜è®¤æƒ…å†µä¸‹ï¼Œ`Requests Table`ä¸€ä¸ªèµ„æºåªæ˜¾ç¤ºå¾ˆå°çš„ä¸€è¡Œã€‚é€‰ä¸­`Use large resource rows`(ä½¿ç”¨å¤§èµ„æºè¡Œ)æŒ‰é’®å¯ä»¥æ˜¾ç¤ºä¸¤ä¸ªæ–‡æœ¬å­—æ®µï¼šä¸»è¦å­—æ®µå’Œæ¬¡è¦å­—æ®µã€‚
- **æ•è·å±å¹•æˆªå›¾** - å°†é¼ æ ‡æ‚¬åœåœ¨æŸä¸ªå±å¹•æˆªå›¾ä¸Šçš„æ—¶å€™ï¼ŒTimeline/Waterfall(æ—¶é—´è½´)ä¼šæ˜¾ç¤ºä¸€æ¡å‚ç›´çš„é»„çº¿ï¼ŒæŒ‡ç¤ºè¯¥å¸§æ˜¯ä½•æ—¶è¢«æ•è·çš„
- **æ˜¾ç¤ºæ¦‚è¿°** - å±•ç¤ºé¡µé¢æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µï¼ˆOverview åŒºåŸŸï¼‰çš„è€—æ—¶ï¼ˆè“è‰²ç»¿è‰²çš„é‚£äº›æ¨ªæ ï¼‰

### ï¼ˆ3ï¼‰ Overview åŒºåŸŸ

é¡µé¢æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µç½‘ç»œèµ„æºåŠ è½½è€—æ—¶ä¿¡æ¯çš„æ±‡æ€»ï¼Œå¯ä»¥é€‰æ‹©åŒºåŸŸæ¥ç­›é€‰ `Requests Table` çš„è¯¦ç»†èµ„æºä¿¡æ¯

### (4) Requests Table åŒºåŸŸ

æ ‡é¢˜æ çš„å¯¹åº”æè¿°ï¼š

- `Name`**(åç§°)**: èµ„æºçš„åç§°ã€‚

- `Status`**(çŠ¶æ€)**: HTTP çŠ¶æ€ä»£ç ã€‚

- `Type`**(ç±»å‹)**: è¯·æ±‚çš„èµ„æºçš„ MIME ç±»å‹ã€‚

- `Initiator`**(å‘èµ·)**: å‘èµ·è¯·æ±‚çš„å¯¹è±¡æˆ–è¿›ç¨‹ã€‚å®ƒå¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§å€¼ï¼š

- - `Parser`**(è§£æå™¨)**: Chrome çš„ HTML è§£æå™¨å‘èµ·äº†è¯·æ±‚ã€‚
  - `Redirect`**(é‡å®šå‘)**: HTTP é‡å®šå‘å¯åŠ¨äº†è¯·æ±‚ã€‚
  - `Script`**(è„šæœ¬)**: è„šæœ¬å¯åŠ¨äº†è¯·æ±‚ã€‚
  - `Other`**(å…¶ä»–)**: ä¸€äº›å…¶ä»–è¿›ç¨‹æˆ–åŠ¨ä½œå‘èµ·è¯·æ±‚ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°é¡µé¢ï¼Œæˆ–åœ¨åœ°å€æ ä¸­è¾“å…¥ç½‘å€ã€‚

- `Size`**(å¤§å°)**: å“åº”å¤´çš„å¤§å°ï¼ˆé€šå¸¸æ˜¯å‡ ç™¾å­—èŠ‚ï¼‰åŠ ä¸Šå“åº”æ•°æ®ï¼Œç”±æœåŠ¡å™¨æä¾›ã€‚

- `Time`**(æ—¶é—´)**: æ€»æŒç»­æ—¶é—´ï¼Œä»è¯·æ±‚çš„å¼€å§‹åˆ°æ¥æ”¶å“åº”ä¸­çš„æœ€åä¸€ä¸ªå­—èŠ‚

- `Timeline/Waterfall`**(æ—¶é—´è½´)**: æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œè¯·æ±‚çš„å¯è§†åŒ–ç»Ÿè®¡ä¿¡æ¯

> åœ¨æ ‡é¢˜æ å¦‚(Name ä¸Š)å³é”®ï¼Œå¯ä»¥æ·»åŠ æˆ–åˆ é™¤ä¿¡æ¯åˆ—ã€‚æ¯”å¦‚å¯ä»¥å¤šåŠ ä¸€åˆ— Response Header => Content-Encoding é€‰é¡¹æ¥æ€»è§ˆé¡µé¢èµ„æºçš„ gzip å‹ç¼©æƒ…å†µ:

![img](./imgs/chrome_devtools_23.png)

#### é‡æ–°å‘èµ·`xhr`è¯·æ±‚

åœ¨å¹³æ—¶å’Œåç«¯è”è°ƒæ—¶ï¼Œæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„å¯èƒ½å°±æ˜¯`Network`é¢æ¿äº†ã€‚ä½†æ˜¯æ¯æ¬¡æƒ³é‡æ–°æŸ¥çœ‹ä¸€ä¸ªè¯·æ±‚é€šè¿‡åˆ·æ–°é¡µé¢ã€ç‚¹å‡»æŒ‰é’®ç­‰æ–¹å¼å»è§¦å‘`xhr`è¯·æ±‚ï¼Œè¿™ç§æ–¹å¼æœ‰æ—¶æ˜¾å¾—ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡`Replay XHR`çš„æ–¹å¼å»å‘èµ·ä¸€æ¡æ–°çš„è¯·æ±‚ï¼š

![img](./imgs/chrome_devtools_24.gif)

#### æŸ¥çœ‹ HTTP ç›¸å…³ä¿¡æ¯

**æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„å‚æ•°**

å¯ä»¥é€šè¿‡ç‚¹å‡» `query string parameters` (æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°)æ—è¾¹çš„ `view URL encoded` (æŸ¥çœ‹ URL ç¼–ç )æˆ– `view decoded` (æŸ¥çœ‹è§£ç )é“¾æ¥ï¼ŒæŸ¥çœ‹ URL ç¼–ç æˆ–è§£ç æ ¼å¼çš„ `query string parameters` (æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°)ã€‚åœ¨ä½¿ç”¨ postman å¤åˆ¶ç›¸å…³å…¥å‚æ—¶å°¤å…¶å®ç”¨ã€‚

![img](./imgs/chrome_devtools_25.png)

**æŸ¥çœ‹ HTTP å“åº”å†…å®¹**ç‚¹å‡» Response(å“åº”)æ ‡ç­¾é¡µå¯ä»¥æŸ¥çœ‹è¯¥èµ„æºæœªæ ¼å¼åŒ–çš„ HTTP å“åº”å†…å®¹

> æ¥å£çš„è¿”å›å€¼(åœ¨ preview ä¸­ï¼‰åŒæ ·ä¹Ÿå¯ä»¥ `Save global variable` å­˜å‚¨ä¸€ä¸ªå…¨å±€å˜é‡
> ![img](./imgs/chrome_devtools_26.gif)

#### Size å’Œ Time ä¸ºä»€ä¹ˆæœ‰ä¸¤è¡Œå‚æ•°ï¼Ÿ

![img](./imgs/chrome_devtools_27.png)

##### å…³äº Size åˆ—

`Size`æœ‰ä¸¤è¡Œï¼š

- ç¬¬ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æ•°æ®çš„**ä¼ è¾“æ—¶**çš„å¤§å°ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­çš„`190KB`
- ç¬¬äºŒè¡Œè¡¨ç¤ºçš„æ˜¯æ•°æ®**å®é™…**çš„å¤§å°`708KB`

> åœ¨æœåŠ¡å™¨ç«¯é‡‡å–`gzip`å‹ç¼©ç®—æ³•å°†åŸæœ‰`708KB`å‹ç¼©è‡³`190KB`,ä¼ è¾“å¤§å°ç¼©çŸ­`3.7 å€`ï¼Œå¤§å¤§çš„æé«˜äº†èµ„æºä¼ è¾“çš„æ•ˆç‡

**éœ€è¦æ³¨æ„çš„ç‚¹ï¼š**

`gzip`å‹ç¼©åªä¼šå‹ç¼©`å“åº”ä½“`å†…å®¹ï¼Œæ‰€ä»¥é€‚ç”¨äºè¿”å›æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®é‡å¤ªå°çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®**ä¼ è¾“æ—¶**çš„å¤§å°æ¯”**å®é™…**å¤§å°è¦å¤§(*åŠ å…¥äº†ä¸€äº›é¢å¤–çš„å“åº”å¤´*)

##### å…³äº Time åˆ—

Time æœ‰ä¸¤è¡Œï¼š

- ç¬¬ä¸€è¡Œè¡¨ç¤ºä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯è¿”å›æ‰€æœ‰æ•°æ®æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ï¼Œå¯¹äºä¸Šå›¾æ¥è¯´å°±æ˜¯`471ms`
- ç¬¬äºŒè¡Œè¡¨ç¤ºçš„æ˜¯ä»å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯è¿”å›ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€è¡¨ç¤ºçš„æ—¶é—´ï¼Œå¯¹äºä¸Šå›¾æ¥è¯´å°±æ˜¯`55ms`

> ç¬¬ä¸€è¡Œçš„æ—¶é—´ä»£è¡¨äº†æ‰€æœ‰é¡¹ç›®ï¼šä¾‹å¦‚`è§£æ dns`ï¼Œ`å»ºç«‹è¿æ¥`ï¼Œ`ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®`ï¼Œ`ä¼ è¾“æ•°æ®`ç­‰
>
> ç¬¬äºŒè¡Œçš„æ—¶é—´æ˜¯ `æ€»æ—¶é—´ - æ•°æ®ä¼ è¾“`çš„æ—¶é—´

ä»ä¸Šé¢çš„åˆ†æä¸­æˆ‘ä»¬çœ‹åˆ° ä»**å®¢æˆ·ç«¯è¯·æ±‚åˆ°æœåŠ¡å™¨å¤„ç†ç»“æŸå‡†å¤‡è¿”å›æ•°æ®**èŠ±äº†`55ms`ï¼Œä½†æ˜¯åœ¨è¿›è¡Œ**ä¼ è¾“æ•°æ®**çš„æ—¶å€™èŠ±è´¹äº†`471ms`

å¯¹äºç½‘æ…¢çš„ç”¨æˆ·æ¥è¯´ï¼Œå¯èƒ½ä¼šè€—è´¹æ›´é•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥åœ¨å†™ä»£ç ï¼ˆæ¥å£ï¼‰çš„æ—¶å€™ï¼Œè¿”å›çš„æ•°æ®é‡è¦å°½é‡ç²¾ç®€

#### Waterfall

ç‚¹å‡»æŸä¸ªèµ„æºä¼šå±•ç¤ºå‡ºè¯¦ç»†çš„ç½‘ç»œåŠ è½½ä¿¡æ¯ï¼š

![img](./imgs/chrome_devtools_28.png)

ç›¸å…³å­—æ®µæè¿°:

- `Queuing` (æ’é˜Ÿ)

  > æµè§ˆå™¨åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯¹è¯·æ±‚æ’é˜Ÿ

- 1. å­˜åœ¨æ›´é«˜ä¼˜å…ˆçº§çš„è¯·æ±‚,è¯·æ±‚è¢«æ¸²æŸ“å¼•æ“æ¨è¿Ÿï¼Œè¿™ç»å¸¸å‘ç”Ÿåœ¨ imagesï¼ˆå›¾åƒï¼‰ä¸Š,å› ä¸ºå®ƒè¢«è®¤ä¸ºæ¯”å…³é”®èµ„æºï¼ˆå¦‚è„šæœ¬/æ ·å¼ï¼‰çš„ä¼˜å…ˆçº§ä½ã€‚
  2. æ­¤æºå·²æ‰“å¼€å…­ä¸ª TCP è¿æ¥ï¼Œè¾¾åˆ°é™å€¼ï¼Œä»…é€‚ç”¨äº HTTP/1.0 å’Œ HTTP/1.1ã€‚åœ¨ç­‰å¾…ä¸€ä¸ªå³å°†è¢«é‡Šæ”¾çš„ä¸å¯ç”¨çš„ TCP socket
  3. æµè§ˆå™¨æ­£åœ¨çŸ­æš‚åˆ†é…ç£ç›˜ç¼“å­˜ä¸­çš„ç©ºé—´ï¼Œç”Ÿæˆç£ç›˜ç¼“å­˜æ¡ç›®ï¼ˆé€šå¸¸éå¸¸å¿«ï¼‰

- `Stalled` (åœæ») - å‘é€è¯·æ±‚ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ã€‚å®ƒå¯èƒ½å› ä¸ºè¿›å…¥é˜Ÿåˆ—çš„ä»»æ„åŸå› è€Œè¢«é˜»å¡ï¼Œè¿™ä¸ªæ—¶é—´åŒ…æ‹¬ä»£ç†åå•†çš„æ—¶é—´ã€‚è¯·æ±‚å¯èƒ½ä¼šå›  Queueing ä¸­æè¿°çš„ä»»ä½•åŸå› è€Œåœæ­¢ã€‚

- `DNS lookup` (DNS æŸ¥æ‰¾) - æµè§ˆå™¨æ­£åœ¨è§£æè¯·æ±‚ IP åœ°å€ï¼Œé¡µé¢ä¸Šçš„æ¯ä¸ªæ–°åŸŸéƒ½éœ€è¦å®Œæ•´çš„å¾€è¿”(roundtrip)æ‰èƒ½è¿›è¡Œ DNS æŸ¥æ‰¾

- `Proxy Negotiation` - æµè§ˆå™¨æ­£åœ¨ä¸ä»£ç†æœåŠ¡å™¨åå•†è¯·æ±‚

- `initial connection` (åˆå§‹è¿æ¥) - å»ºç«‹è¿æ¥æ‰€éœ€çš„æ—¶é—´ï¼ŒåŒ…æ‹¬ TCP æ¡æ‰‹/é‡è¯•å’Œåå•† SSLã€‚

- `SSL handshake` (SSL æ¡æ‰‹) - å®Œæˆ SSL æ¡æ‰‹æ‰€ç”¨çš„æ—¶é—´

- `Request sent` (è¯·æ±‚å‘é€) - å‘å‡ºç½‘ç»œè¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œé€šå¸¸æ˜¯å‡ åˆ†ä¹‹ä¸€æ¯«ç§’ã€‚

- `Waiting` (ç­‰å¾…) - ç­‰å¾…åˆå§‹å“åº”æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä¹Ÿç§°ä¸º`Time To First Byte`(æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€èŠ±è´¹çš„æ—¶é—´)ã€‚è¿™ä¸ªæ—¶é—´é™¤äº†ç­‰å¾…æœåŠ¡å™¨ä¼ é€’å“åº”æ‰€èŠ±è´¹çš„æ—¶é—´ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬ 1 æ¬¡å¾€è¿”å»¶è¿Ÿæ—¶é—´åŠæœåŠ¡å™¨å‡†å¤‡å“åº”æ‰€ç”¨çš„æ—¶é—´ï¼ˆæœåŠ¡å™¨å‘é€æ•°æ®çš„å»¶è¿Ÿæ—¶é—´ï¼‰

- `Content Download`(å†…å®¹ä¸‹è½½) - æ¥æ”¶å“åº”æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´(ä»æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œåˆ°ä¸‹è½½å®Œæœ€åä¸€ä¸ªå­—èŠ‚ç»“æŸ)

- `ServiceWorker Preparation` - æµè§ˆå™¨æ­£åœ¨å¯åŠ¨ Service Worker

- `Request to ServiceWorker` - æ­£åœ¨å°†è¯·æ±‚å‘é€åˆ° Service Worker

- `Receiving Push` - æµè§ˆå™¨æ­£åœ¨é€šè¿‡ HTTP/2 æœåŠ¡å™¨æ¨é€æ¥æ”¶æ­¤å“åº”çš„æ•°æ®

- `Reading Push` - æµè§ˆå™¨æ­£åœ¨è¯»å–ä¹‹å‰æ”¶åˆ°çš„æœ¬åœ°æ•°æ®

![img](./imgs/chrome_devtools_29.png)

### (5) Summary åŒºåŸŸ

![img](./imgs/chrome_devtools_30.png)

`requests` æŸ¥çœ‹è¯·æ±‚çš„æ€»æ•°é‡ | `transferred` æŸ¥çœ‹è¯·æ±‚çš„æ€»å¤§å° | `resources` èµ„æº | `Finish` æ‰€æœ‰ http è¯·æ±‚å“åº”å®Œæˆçš„æ—¶é—´ | DOMContentLoaded æ—¶é—´ | load æ—¶é—´

å½“é¡µé¢çš„åˆå§‹çš„æ ‡è®°è¢«è§£æå®Œæ—¶ï¼Œä¼šè§¦å‘ `DOMContentLoaded`ã€‚ å®ƒåœ¨ Network(ç½‘ç»œ)é¢æ¿ä¸Šçš„æ˜¾ç¤ºï¼š

- åœ¨ Overview (æ¦‚è§ˆ)çª—æ ¼ä¸­çš„è“è‰²å‚ç›´çº¿è¡¨ç¤ºè¿™ä¸ªäº‹ä»¶ã€‚
- åœ¨ Requests Table (è¯·æ±‚åˆ—è¡¨)ä¸­çš„çº¢è‰²å‚ç›´çº¿ä¹Ÿè¡¨ç¤ºè¿™ä¸ªäº‹ä»¶ã€‚
- åœ¨ Summary (æ¦‚è¦)çª—æ ¼ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹äº‹ä»¶çš„ç¡®åˆ‡æ—¶é—´ã€‚![img](./imgs/chrome_devtools_31.png)

å½“é¡µé¢å®Œå…¨åŠ è½½æ—¶è§¦å‘ `load` äº‹ä»¶ã€‚ å®ƒæ˜¾ç¤ºä¹Ÿæ˜¾ç¤ºåœ¨ï¼š

- åœ¨ Overview (æ¦‚è§ˆ)çª—æ ¼çš„çº¢è‰²å‚ç›´çº¿è¡¨ç¤ºè¿™ä¸ªäº‹ä»¶ã€‚
- åœ¨ Requests Table (è¯·æ±‚åˆ—è¡¨)ä¸­çš„çº¢è‰²å‚ç›´çº¿ä¹Ÿè¡¨ç¤ºè¿™ä¸ªäº‹ä»¶ã€‚
- åœ¨ Summary (æ¦‚è¦)ä¸­ï¼Œå¯ä»¥æŸ¥çœ‹æ”¹äº‹ä»¶çš„ç¡®åˆ‡æ—¶é—´![img](./imgs/chrome_devtools_32.png)

> DOMContentLoaded ä¼šæ¯” Load æ—¶é—´å°ï¼Œä¸¤è€…æ—¶é—´å·®å¤§è‡´ç­‰äºå¤–éƒ¨èµ„æºåŠ è½½ï¼ˆä¸€èˆ¬æ˜¯å›¾ç‰‡/å­—ä½“ï¼‰çš„æ—¶é—´
>
> Finish æ—¶é—´æ˜¯é¡µé¢ä¸Šæ‰€æœ‰ http è¯·æ±‚å‘é€åˆ°å“åº”å®Œæˆçš„æ—¶é—´ï¼ˆå¦‚æœé¡µé¢å­˜åœ¨ä¸€ä¸ªè½®è¯¢çš„æ¥å£ï¼Œè¿™ä¸ªå€¼ä¹Ÿä¼šç´¯åŠ çš„ï¼‰ã€‚HTTP1.0/1.1 åè®®é™å®šå•ä¸ªåŸŸåçš„è¯·æ±‚å¹¶å‘é‡æ˜¯ 6 ä¸ªï¼Œå³ Finish æ˜¯æ‰€æœ‰è¯·æ±‚ï¼ˆä¸åªæ˜¯ XHR è¯·æ±‚ï¼Œè¿˜åŒ…æ‹¬ DOCï¼Œimgï¼Œjsï¼Œcss ç­‰èµ„æºçš„è¯·æ±‚ï¼‰åœ¨å¹¶å‘é‡ä¸º 6 çš„é™åˆ¶ä¸‹å®Œæˆçš„æ—¶é—´ã€‚
>
> - Finish çš„æ—¶é—´æ¯” Load å¤§ï¼Œæ„å‘³ç€é¡µé¢æœ‰ç›¸å½“éƒ¨åˆ†çš„è¯·æ±‚é‡
> - Finish çš„æ—¶é—´æ¯” Load å°ï¼Œæ„å‘³ç€é¡µé¢è¯·æ±‚é‡å¾ˆå°‘ï¼Œå¦‚æœé¡µé¢æ˜¯åªæœ‰ä¸€ä¸ª html æ–‡æ¡£è¯·æ±‚çš„é™æ€é¡µé¢ï¼ŒFinish æ—¶é—´åŸºæœ¬å°±ç­‰äº HTML æ–‡æ¡£è¯·æ±‚çš„æ—¶é—´
>
> æ‰€ä»¥ Finish æ—¶é—´ä¸ DOMContentLoaded å’Œ Load å¹¶æ— ç›´æ¥å…³ç³»

### ä½¿ç”¨ Network é¢æ¿è¿›è¡Œç½‘ç»œä¼˜åŒ–

> å‚è€ƒ Network é¢æ¿å¯ä»¥é’ˆå¯¹ Network æå‡ºä¸€äº›ä¼˜åŒ–å»ºè®®

#### æ’é˜Ÿæˆ–åœæ­¢é˜»å¡

æœ€å¸¸è§çš„é—®é¢˜æ˜¯å¾ˆå¤šä¸ªè¯·æ±‚æ’é˜Ÿæˆ–è¢«é˜»å¡ã€‚è¿™è¡¨ç¤ºä»å•ä¸ªå®¢æˆ·ç«¯æ£€ç´¢çš„èµ„æºå¤ªå¤šã€‚åœ¨ HTTP 1.0/1.1 è¿æ¥åè®®ä¸­ï¼ŒChrome é™åˆ¶æ¯ä¸ªåŸŸåæœ€å¤šæ‰§è¡Œ 6 ä¸ª TCP è¿æ¥ã€‚å¦‚æœä¸€æ¬¡è¯·æ±‚åäºŒä¸ªèµ„æºï¼Œå‰ 6 ä¸ªå°†å¼€å§‹ï¼Œå 6 ä¸ªå°†æ’é˜Ÿã€‚ä¸€æ—¦å…¶ä¸­ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼Œé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªè¯·æ±‚é¡¹ç›®å°†å¼€å§‹å…¶è¯·æ±‚è¿‡ç¨‹ã€‚

![img](./imgs/chrome_devtools_33.png)

è¦è§£å†³ä¼ ç»Ÿ HTTP 1 çš„æ­¤é—®é¢˜ï¼Œéœ€è¦ç”¨å¤šä¸ªå­åŸŸåæä¾›æœåŠ¡èµ„æºï¼Œå°†èµ„æºæ‹†åˆ†åˆ°å¤šä¸ªå­åŸŸä¸­ï¼Œå‡åŒ€åˆ†é…ã€‚

> ä¸Šé¢è¯´çš„ä¿®å¤ HTTP 1 è¿æ¥æ•°é—®é¢˜ï¼Œä¸é€‚ç”¨äº HTTP 2 è¿æ¥ï¼Œå¦‚æœå·²éƒ¨ç½² HTTP 2ï¼Œä¸è¦å¯¹èµ„æºè¿›è¡ŒåŸŸåˆ’åˆ†ï¼Œå› ä¸ºå®ƒä¼šå½±å“ HTTP 2 çš„å·¥ä½œåŸç†ï¼ˆåœ¨ HTTP 2 ä¸­ TCP è¿æ¥å¤šè·¯å¤ç”¨è¿æ¥çš„ï¼‰ã€‚å–æ¶ˆäº† HTTP 1 çš„ 6 ä¸ªè¿æ¥é™åˆ¶ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å•ä¸ªè¿æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªèµ„æºã€‚

#### æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´å¾ˆæ…¢

ç»¿è‰²çš„å—å æ®æ¯”ä¾‹å¾ˆé«˜ï¼š

![img](./imgs/chrome_devtools_34.png)

TTFB å°±æ˜¯ç­‰å¾…ç¬¬ä¸€ä¸ªå“åº”å­—èŠ‚çš„æ—¶é—´ï¼Œå»ºè®®åœ¨ 200ms ä»¥ä¸‹ï¼Œä»¥ä¸‹æƒ…å†µå¯èƒ½ä¼šå¯¼è‡´é«˜ TTFB:

1. å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œæ¡ä»¶å·®
2. è¦ä¹ˆï¼ŒæœåŠ¡å™¨ç«¯ç¨‹åºå“åº”å¾ˆæ…¢

> ä¸ºäº†è§£å†³é«˜ TTFBï¼Œé¦–å…ˆå»æ’é™¤å°½å¯èƒ½å¤šçš„ç½‘ç»œè¿æ¥ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåœ¨æœ¬åœ°æ‰˜ç®¡åº”ç”¨ç¨‹åºï¼ˆéƒ¨ç½²åœ¨æœ¬åœ°ï¼‰ï¼Œå¹¶æŸ¥çœ‹æ˜¯å¦ä»æœ‰ä¸€ä¸ªå¤§çš„ TTFBã€‚å¦‚æœæœ‰ï¼Œé‚£ä¹ˆéœ€è¦ä¼˜åŒ–åº”ç”¨ç¨‹åºé’ˆçš„å“åº”é€Ÿåº¦ã€‚è¿™å¯èƒ½æ„å‘³ç€ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œä¸ºå†…å®¹çš„æŸäº›éƒ¨åˆ†å®ç°é«˜é€Ÿç¼“å­˜ï¼Œæˆ–ä¿®æ”¹ Web æœåŠ¡å™¨é…ç½®ã€‚åç«¯å¯èƒ½å¾ˆæ…¢çš„åŸå› æœ‰å¾ˆå¤šã€‚æ‚¨éœ€è¦å¯¹æ‚¨çš„ç¨‹åºè¿›è¡Œç ”ç©¶ï¼Œå¹¶æ‰¾å‡ºä¸ç¬¦åˆæ‚¨é¢„æœŸçš„å†…å®¹ã€‚
>
> å¦‚æœæœ¬åœ° TTFB ä½ï¼Œé‚£ä¹ˆæ˜¯æ‚¨çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé—®é¢˜ã€‚ç½‘ç»œä¼ è¾“å¯èƒ½è¢«å¾ˆå¤šç§äº‹æƒ…å¹²æ‰°é˜»ç¢ã€‚åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰å¾ˆå¤šç‚¹ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„è¿æ¥é™åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚æµ‹è¯•å‡å°‘è¿™ç§æƒ…å†µçš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ‚¨çš„åº”ç”¨ç¨‹åºæ”¾åœ¨å¦ä¸€å°ä¸»æœºä¸Šï¼Œçœ‹çœ‹ TTFB æ˜¯å¦æ”¹è¿›ã€‚

#### åŠ è½½ç¼“æ…¢

è“è‰²çš„å—å æ®æ¯”ä¾‹å¾ˆé«˜ï¼š

![img](./imgs/chrome_devtools_35.png)

å¦‚æœ `Content Download` (å†…å®¹ä¸‹è½½)é˜¶æ®µèŠ±è´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæé«˜æœåŠ¡å“åº”é€Ÿåº¦ã€å¹¶è¡Œä¸‹è½½ç­‰ä¼˜åŒ–æªæ–½å¸®åŠ©éƒ½ä¸å¤§ã€‚ ä¸»è¦çš„è§£å†³æ–¹æ¡ˆæ˜¯å‘é€æ›´å°‘çš„å­—èŠ‚ï¼ˆæ¯”å¦‚ä¸€å¼ é«˜è´¨é‡çš„å¤§å›¾å¯èƒ½å‡  M çš„å¤§å°ï¼Œè¿™æ—¶å¯ä»¥é…Œæƒ…ä¼˜åŒ–ä¸€ä¸‹å›¾ç‰‡çš„å®½é«˜/æ¸…æ™°åº¦ï¼‰

## Sources é¢æ¿

> æ­¤ç« èŠ‚è¯·æ‰“å¼€ justwe7.github.io/devtools/debug-js/get-started.html ä¸€èµ·é£Ÿç”¨
>
> ä¸»è¦ç”¨æ¥è°ƒè¯•é¡µé¢ä¸­çš„ JavaScript

### è‡ªå®šä¹‰ä»£ç ç‰‡æ®µ Snippets

> æˆ‘ä»¬ç»å¸¸æœ‰äº› `JavaScript` çš„ä»£ç æƒ³åœ¨æ§åˆ¶å°ä¸­è°ƒè¯•ï¼Œå‡å¦‚ä»£ç é‡å¤šçš„æƒ…å†µä¸‹ç›´æ¥åœ¨ `console` ä¸‹å†™æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ–è€…æˆ‘ä»¬ç»å¸¸æœ‰äº›ä»£ç ç‰‡æ®µ(é˜²æŠ–ã€èŠ‚æµã€è·å–åœ°å€æ å‚æ•°ç­‰)æƒ³ä¿å­˜èµ·æ¥ï¼Œæ¯æ¬¡æ‰“å¼€ `Devtools` éƒ½èƒ½è·å–åˆ°è¿™äº›ä»£ç ç‰‡æ®µï¼Œè€Œä¸ç”¨å†å»ä»ç¬”è®°é‡Œé¢æ‰¾ã€‚

å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨ `Sources` è¿™ä¸ª`tab`æ ä¸‹ï¼Œæœ‰ä¸ª `Snippets` æ ‡ç­¾ï¼Œåœ¨é‡Œé¢å¯ä»¥æ·»åŠ ä¸€äº›å¸¸ç”¨çš„ä»£ç ç‰‡æ®µã€‚ï¼ˆå½“ä¸ªå°ç¬”è®°æœ¬ï¼‰

![img](./imgs/chrome_devtools_36.gif)

### è®¾ç½®æ–­ç‚¹

#### æ–­ç‚¹çš„é¢æ¿

![img](./imgs/chrome_devtools_37.png)

![img](./imgs/chrome_devtools_38.png)

#### æŒ‡å®šä½ç½®çš„ä¸­æ–­

æ–­ç‚¹è°ƒè¯•åŸºæœ¬æµç¨‹

æ‰¾åˆ°æºä»£ç ï¼Œç‚¹å‡»è¦ä¸­æ–­ä»£ç æ‰§è¡Œçš„ä½ç½®ï¼Œç‚¹å‡»çº¢è‰²æŒ‰é’®çš„ä½ç½®ã€‚ç„¶åå†è§¦å‘è¯¥æ–¹æ³•æ‰§è¡Œï¼Œå› ä¸ºå·²çŸ¥ç‚¹å‡»æŒ‰é’®å¯ä»¥è§¦å‘ï¼Œç²¾å‡†çš„å®šä½åˆ°ä»£ç è¡Œå°±å¯ä»¥äº†:

![img](./imgs/chrome_devtools_39.png)

#### å…¨å±€äº‹ä»¶ä¸­æ–­

å‡å¦‚ä¸çŸ¥é“ä»£ç æ‰§è¡Œçš„ä½ç½®ï¼Œå¦‚ä»¥ä¸‹åœºæ™¯ï¼š

![img](./imgs/chrome_devtools_40.png)

çœ‹æ¥å£è¿”å›çš„åˆ—è¡¨æ€»æ•°åº”è¯¥æ˜¯ 20 æ¡ï¼Œä½†æ˜¯é¡µé¢åˆ° 15 æ¡å°±æ˜¾ç¤ºåˆ°åº•éƒ¨äº†

![img](./imgs/chrome_devtools_41.png)

çœ‹ä»£ç å†™çš„åˆ¤æ–­æ¡ä»¶æœ‰ç‚¹é—®é¢˜ï¼Œä½†ä»ç¼–è¯‘åçš„ä»£ç æ‰¾åˆ°å¯¹åº”ä½ç½®è¿›è¡Œè°ƒè¯•å°±ç›¸å½“äºå¤§æµ·æé’ˆäº†ã€‚æƒ³è¯•è¯•è‡ªå·±çš„è®¾æƒ³çš„è§£å†³æ–¹å¼æ˜¯å¦æ­£ç¡®ï¼š

1. å› ä¸ºåˆ—è¡¨æ˜¯ææ‹‰åŠ è½½ï¼Œæ‰€ä»¥è‚¯å®šä¼šè§¦å‘ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥åœ¨äº‹ä»¶ä¾¦å¬å™¨é‡Œé¢æ‰“ä¸€ä¸ª `XHR` çš„æ–­ç‚¹

2. ç„¶åææ‹‰åŠ è½½é¡µé¢è§¦å‘æ¥å£è¯·æ±‚ï¼Œå¦‚é¢„æœŸçš„ï¼Œä»£ç ä¸­æ–­æ‰§è¡Œäº†ã€‚ä½†æç¤ºæ‰¾ä¸åˆ° sourcemapï¼Œæš‚æ—¶æŠŠ js çš„èµ„æºæ˜ å°„ç»™å…³æ‰(ç›¸å…³è§£å†³æ–¹å¼)ï¼š![img](./imgs/chrome_devtools_42.png)![img](https://mmbiz.qpic.cn/mmbiz_png/Tmczbd3NL03Nrr2xwNL7NagpmUwe8Qs1MVMTESWMcZPDnYQicuvtVRqIKhDNiaq3B5icGXWTZbHmhTK9ARaz83M5w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

3. å†æ¬¡è§¦å‘æ–­ç‚¹ï¼Œå‘ç°å¯ä»¥æŸ¥çœ‹åˆ°ä¸­æ–­çš„ä»£ç äº†ï¼Œå› ä¸ºè‚¯å®šæ˜¯é¡µé¢ä¸­çš„ä¸šåŠ¡ä»£ç å°†è¯·æ±‚æ¨å…¥åˆ°æ‰§è¡Œå †æ ˆçš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å †æ ˆä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•åï¼š`getVideoList`

   ![img](./imgs/chrome_devtools_43.png)

4. ç‚¹å‡»æ–¹æ³•åå¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„æºç ï¼Œå¯ä»¥çœ‹åˆ°åœˆèµ·æ¥çš„ä»£ç å’Œæ‰€çŒœæƒ³çš„é—®é¢˜ä»£ç åº”è¯¥æ˜¯åŒä¸€å¤„![img](./imgs/chrome_devtools_44.png)

5. å›è¿‡æ¥çœ‹ä¸‹é—®é¢˜åŸå› ï¼š é¡µé¢è¯·æ±‚å®Œæ–°æ•°æ®åç›´æ¥ `pageNum` è‡ªå¢ï¼Œç„¶åç›´æ¥å°±ç”¨äºæ˜¯å¦ç»“æŸçš„åˆ¤æ–­äº†ï¼Œæœ‰ç‚¹ä¸å¤Ÿä¸¥è°¨ï¼Œä¸å¦‚ç›´æ¥æ¯”å¯¹å½“å‰çš„åˆ—è¡¨é•¿åº¦ä¸æ¥å£è¿”å›çš„æ•°æ®æ€»æ•°æ¥åˆ¤æ–­:![img](./imgs/chrome_devtools_45.png)

6. è®°ä½è¦ä¿®æ”¹çš„ä»£ç ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯ `191.xxx.js`

7. 1. ç¬¬ä¸€è¡Œå…ˆæ‰“ä¸ªæ–­ç‚¹ï¼Œpush æ–¹æ³•ä¹‹å‰å†æ‰“ä¸€ä¸ªæ–­ç‚¹:![img](./imgs/chrome_devtools_46.png)(å¦‚æœæ²¡æœ‰å†åˆ·æ–°ä¸€ä¸‹(ä¹Ÿä¸æ¸…æ¥šä¸ºä»€ä¹ˆå¯èƒ½ä¼šæ²¡æœ‰))
   2. ç„¶ååˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°åˆšåˆšæƒ³è¦ä¿®æ”¹çš„ä»£ç : ç”¨ `t.recommendList.length` æ›¿æ¢æ‰ `n.pageSize*t.pageNo`ï¼ˆå‰ä¸¤æ­¥æ˜¯ä¸ºäº†é¿å… js å¼€å§‹è§£æé—®é¢˜ä»£ç ï¼Œå…ˆé˜»å¡ä¸€ä¸‹è¿è¡Œ: stackoverflowï¼‰

8. å†`Ctrl + S`ï¼Œä¿å­˜ä¸€ä¸‹ï¼Œç„¶åçœ‹ä¸‹é¡µé¢æ•ˆæœï¼Œåˆ—è¡¨å¯ä»¥å…¨éƒ¨åŠ è½½å‡ºæ¥äº†:![img](./imgs/chrome_devtools_47.png)

> åœ¨ç¾åŒ–ä»£ç çš„é¢æ¿ä¸­æ˜¯ä¸æ”¯æŒç›´æ¥ä¿®æ”¹é¡µé¢ä»£ç çš„

#### é»‘ç›’æ¨¡å¼

æŠŠè„šæœ¬æ–‡ä»¶æ”¾å…¥ Blackbox(é»‘ç›’)ï¼Œå¯ä»¥å¿½ç•¥æ¥è‡ªç¬¬ä¸‰æ–¹åº“çš„è°ƒç”¨å †æ ˆ

é»˜è®¤ï¼ˆä¸å¼€å¯é»‘ç›’ï¼‰ï¼š
![img](./imgs/chrome_devtools_48.png)

å¼€å¯é»‘ç›’ï¼š
![img](./imgs/chrome_devtools_49.png)

- æ‰“å¼€æ–¹å¼â‘ 

- 1. æ‰“å¼€ DevTools `Settings` (è®¾ç½®)
  2. åœ¨å·¦ä¾§çš„å¯¼èˆªèœå•ä¸­ï¼Œå•å‡» `Blackboxing` (é»‘ç®±)
  3. ç‚¹å‡» `Add pattern...` (æ·»åŠ æ¨¡å¼)æŒ‰é’®ã€‚
  4. åœ¨ `Pattern`(æ¨¡å¼)æ–‡æœ¬æ¡†è¾“å…¥æ‚¨å¸Œæœ›ä»è°ƒç”¨å †æ ˆä¸­æ’é™¤çš„æ–‡ä»¶åæ¨¡å¼ã€‚DevTools ä¼šæ’é™¤è¯¥æ¨¡å¼åŒ¹é…çš„ä»»ä½•è„šæœ¬ã€‚
  5. åœ¨æ–‡æœ¬å­—æ®µå³ä¾§çš„ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹© `Blackbox` (é»‘ç®±)ä»¥æ‰§è¡Œè„šæœ¬æ–‡ä»¶ä½†æ˜¯æ’é™¤æ¥è‡ªè°ƒç”¨å †æ ˆçš„è°ƒç”¨ï¼Œæˆ–é€‰æ‹© `Disabled` (ç¦ç”¨)æ¥é˜»æ­¢æ–‡ä»¶æ‰§è¡Œã€‚
  6. ç‚¹å‡»`Add`(æ·»åŠ ) ä¿å­˜

- æ‰“å¼€æ–¹å¼â‘¡
  ç›´æ¥åœ¨æƒ³è¦å¿½ç•¥çš„å †æ ˆä¿¡æ¯ä¸Š `blackbox script`

#### DOM æ–­ç‚¹

æŸ¥çœ‹ element é¢æ¿DOM æ–­ç‚¹

## Performance é¢æ¿

> æ­¤ç« èŠ‚è¯·ä½¿ç”¨**Chrome çš„éšèº«æ¨¡å¼**æ‰“å¼€ justwe7.github.io/devtools/jank/index.html ä¸€èµ·é£Ÿç”¨ éšèº«æ¨¡å¼å¯ä»¥ä¿è¯ Chrome åœ¨ä¸€ä¸ªç›¸å¯¹å¹²å‡€çš„ç¯å¢ƒä¸‹è¿è¡Œã€‚å‡å¦‚å®‰è£…äº†è®¸å¤š chrome æ’ä»¶ï¼Œè¿™äº›æ’ä»¶å¯èƒ½ä¼šå½±å“åˆ†ææ€§èƒ½è¡¨ç°
>
> åœ¨ Performance é¢æ¿å¯ä»¥æŸ¥çœ‹é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨ä»€ä¹ˆæ—¶é—´å¼€å§‹åšä»€ä¹ˆäº‹æƒ…ï¼Œè€—æ—¶å¤šä¹…ç­‰ç­‰ã€‚ç›¸è¾ƒäº Network é¢æ¿ï¼Œä¸ä»…å¯ä»¥çœ‹åˆ°é€šè¿‡ç½‘ç»œåŠ è½½èµ„æºçš„ä¿¡æ¯ï¼Œè¿˜èƒ½çœ‹åˆ°è§£æ JSã€è®¡ç®—æ ·å¼ã€é‡ç»˜ç­‰é¡µé¢åŠ è½½çš„æ–¹æ–¹é¢é¢çš„ä¿¡æ¯

### é¢æ¿ä¸»è¦çš„åŒºåŸŸåˆ’åˆ†ï¼š

1. `Controls` - å¼€å§‹è®°å½•ï¼Œåœæ­¢è®°å½•å’Œé…ç½®è®°å½•æœŸé—´æ•è·çš„ä¿¡æ¯

2. `Overview` - é¡µé¢æ€§èƒ½çš„æ±‡æ€»

3. `Flame Chart` - [ç«ç„°å›¾(çº¿ç¨‹é¢æ¿)]ã€‚åœ¨ç«ç„°å›¾ä¸Šçœ‹åˆ°ä¸‰æ¡ï¼ˆç»¿è‰²çš„æœ‰å¥½å‡ æ¡ï¼‰å‚ç›´çš„è™šçº¿ï¼š

4. - è“çº¿ä»£è¡¨ `DOMContentLoaded` äº‹ä»¶
   - ç»¿çº¿ä»£è¡¨é¦–æ¬¡ç»˜åˆ¶çš„æ—¶é—´
   - çº¢çº¿ä»£è¡¨ `load` äº‹ä»¶

5. `Details` - åœ¨ Flame Chart ä¸­ï¼Œé€‰æ‹©äº†æŸä¸€äº‹ä»¶åï¼Œè¿™éƒ¨åˆ†ä¼šå±•ç¤ºä¸è¿™ä¸ªäº‹ä»¶ç›¸å…³çš„æ›´å¤šä¿¡æ¯ï¼›

   > å¦‚æœé€‰æ‹©äº†æŸä¸€å¸§ï¼Œè¿™éƒ¨åˆ†ä¼šå±•ç¤ºä¸é€‰ä¸­å¸§ç›¸å…³çš„ä¿¡æ¯ã€‚å¦‚æœæ—¢æ²¡æœ‰é€‰ä¸­äº‹ä»¶ä¹Ÿæ²¡æœ‰é€‰ä¸­å¸§ï¼Œåˆ™è¿™éƒ¨åˆ†ä¼šå±•ç¤ºå½“å‰è®°å½•æ—¶é—´æ®µå†…çš„ç›¸å…³ä¿¡æ¯ã€‚

![img](./imgs/chrome_devtools_50.png)

### å¼€å§‹è®°å½•

1. é¦–å…ˆç‚¹å‡»æ§åˆ¶æ¡å·¦è¾¹çš„ç¬¬ä¸€ä¸ªåœ†åœˆï¼Œå¼€å§‹è®°å½•æ—¥å¿—
2. ç­‰å¾…å‡ åˆ†é’Ÿ(æ­£å¸¸æ“ä½œé¡µé¢)
3. ç‚¹å‡» Stop æŒ‰é’®ï¼ŒDevtools åœæ­¢å½•åˆ¶ï¼Œå¤„ç†æ•°æ®ï¼Œç„¶åæ˜¾ç¤ºæ€§èƒ½æŠ¥å‘Š

ç„¶åå°±ä¼šå‡ºæ¥ä¸Šå›¾çš„å†…å®¹

> ä¸å°å¼æœºå’Œç¬”è®°æœ¬ç”µè„‘ç›¸æ¯”ç§»åŠ¨è®¾å¤‡çš„ CPU åŠŸç‡è¦å°å¾—å¤šã€‚æ— è®ºä½•æ—¶åˆ†æé¡µé¢ï¼Œéƒ½ä½¿ç”¨ CPU é™åˆ¶æ¥æ¨¡æ‹Ÿé¡µé¢åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„è¡¨ç°ã€‚ åœ¨"å¼€å‘å·¥å…·"ä¸­ï¼Œå•å‡»"æ€§èƒ½"é€‰é¡¹å¡ã€‚ ç¡®ä¿å¯ç”¨"å±å¹•æˆªå›¾"å¤é€‰æ¡†ã€‚ å•å‡»"æ•è·è®¾ç½®"ã€‚ Capture SettingsDevTools æ­ç¤ºäº†ä¸å¦‚ä½•æ•è·æ€§èƒ½æŒ‡æ ‡ç›¸å…³çš„è®¾ç½®ã€‚ å¯¹äº CPUï¼Œé€‰æ‹© 2 å€å‡é€Ÿã€‚DevTools ä¼šé™åˆ¶ CPU ä½¿å…¶é€Ÿåº¦æ¯”å¹³æ—¶æ…¢ 2 å€

> æ³¨æ„ï¼šå¦‚æœæƒ³è¦ç¡®ä¿å®ƒä»¬åœ¨ä½ç«¯ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œè‰¯å¥½ï¼Œè¯·å°† CPU é™åˆ¶è®¾ç½®ä¸º 20 å€å‡é€Ÿã€‚

### (1)controls æ§åˆ¶æ¡åŒºåŸŸ

- ä¸ŠåŠåŒºåŸŸ

- - `Screenshots` æˆªå›¾ï¼šé»˜è®¤å‹¾é€‰ï¼Œæ¯ä¸€å¸§éƒ½ä¼šæˆªå›¾
  - `Memory` å†…å­˜æ¶ˆè€—è®°å½•ï¼šå‹¾é€‰åå¯ä»¥çœ‹åˆ°å„ç§å†…å­˜æ¶ˆè€—æ›²çº¿

- ä¸‹é¢çš„ checkbox åŒºåŸŸ

- - `Disable javaScript samples` [ç¦ç”¨ javaScript ç¤ºä¾‹]ï¼šå‡å°‘åœ¨æ‰‹æœºè¿è¡Œæ—¶ç³»ç»Ÿçš„å¼€é”€ï¼Œæ¨¡æ‹Ÿæ‰‹æœºè¿è¡Œæ—¶å‹¾é€‰
  - `Network` [ç½‘ç»œæ¨¡æ‹Ÿ]ï¼šå¯ä»¥æ¨¡æ‹Ÿåœ¨ 3G,4G ç­‰ç½‘ç»œæ¡ä»¶ä¸‹è¿è¡Œé¡µé¢
  - `Enable advanced paint instrumentation(slow)` [å¯ç”¨é«˜çº§ç”»å›¾æ£€æµ‹å·¥å…·(æ…¢é€Ÿ)]ï¼šæ•è·é«˜çº§ç”»å›¾æ£€æµ‹å·¥å…·ï¼Œå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å¼€é”€
  - `CPU` [CPU é™åˆ¶æ€§èƒ½]ï¼šä¸»è¦ä¸ºäº†æ¨¡æ‹Ÿåº• CPU ä¸‹è¿è¡Œæ€§èƒ½

### (2)overview æ€»è§ˆåŒºåŸŸ

![img](./imgs/chrome_devtools_51.png)

#### FPS

ç»¿è‰²ç«–çº¿è¶Šé«˜ï¼ŒFPS è¶Šé«˜ã€‚ FPS å›¾è¡¨ä¸Šçš„çº¢è‰²å—(ä¸Šå›¾åˆšå¼€å§‹çš„éƒ¨åˆ†)è¡¨ç¤ºé•¿æ—¶é—´å¸§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¡é¡¿ã€‚ç»å¸¸æ‰“æ¸¸æˆè‚¯å®šçŸ¥é“è¿™ä¸ªæŒ‡æ ‡ä»£è¡¨ä»€ä¹ˆï¼Œ`120FPS` ä»£è¡¨æµç•…ï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰

ç«ç„°å›¾çš„ `FPS` å¯ä»¥é‡åŒ–è¿™é¡¹å‚æ•°

> FPSï¼ˆframes per secondï¼‰æ˜¯ç”¨æ¥åˆ†æåŠ¨ç”»çš„ä¸€ä¸ªä¸»è¦æ€§èƒ½æŒ‡æ ‡ã€‚èƒ½ä¿æŒåœ¨ 60 çš„ FPS çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·ä½“éªŒå°±æ˜¯ä¸é”™çš„
>
> Q: ä¸ºä»€ä¹ˆæ˜¯ 60fps?
>
> A: æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¿è¯é¡µé¢è¦æœ‰é«˜äºæ¯ç§’ 60fps(å¸§)çš„åˆ·æ–°é¢‘ç‡ï¼Œè¿™å’Œç›®å‰å¤§å¤šæ•°æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ç›¸å»åˆ(60Hz)ã€‚å¦‚æœç½‘é¡µåŠ¨ç”»èƒ½å¤Ÿåšåˆ°æ¯ç§’ 60 å¸§ï¼Œå°±ä¼šè·Ÿæ˜¾ç¤ºå™¨åŒæ­¥åˆ·æ–°ï¼Œè¾¾åˆ°æœ€ä½³çš„è§†è§‰æ•ˆæœã€‚è¿™æ„å‘³ç€ï¼Œä¸€ç§’ä¹‹å†…è¿›è¡Œ 60 æ¬¡é‡æ–°æ¸²æŸ“ï¼Œæ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶é—´ä¸èƒ½è¶…è¿‡ 16.66 æ¯«ç§’

#### CPU

CPU èµ„æºã€‚**æ­¤é¢ç§¯å›¾æŒ‡ç¤ºæ¶ˆè€— CPU èµ„æºçš„äº‹ä»¶ç±»å‹**ã€‚åœ¨ CPU å›¾è¡¨ä¸­çš„å„ç§é¢œè‰²ä¸ `Summary` é¢æ¿é‡Œçš„é¢œè‰²æ˜¯ç›¸äº’å¯¹åº”çš„ï¼Œ`Summary` é¢æ¿å°±åœ¨ `Performance` é¢æ¿çš„ä¸‹æ–¹ã€‚CPU å›¾è¡¨ä¸­çš„å„ç§é¢œè‰²ä»£è¡¨ç€åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼ŒCPU åœ¨å„ç§å¤„ç†ä¸Šæ‰€èŠ±è´¹çš„æ—¶é—´ã€‚å¦‚æœä½ çœ‹åˆ°äº†æŸä¸ªå¤„ç†å ç”¨äº†å¤§é‡çš„æ—¶é—´ï¼Œé‚£ä¹ˆè¿™å¯èƒ½å°±æ˜¯ä¸€ä¸ªå¯ä»¥æ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆçš„çº¿ç´¢

##### CPU èµ„æºé¢ç§¯å›¾é¢œè‰²åˆ’åˆ†:

| é¢œè‰²            | æ‰§è¡Œå†…å®¹                     |
| :-------------- | :--------------------------- |
| è“è‰²(Loading)   | ç½‘ç»œé€šä¿¡å’Œ HTML è§£æ         |
| é»„è‰²(Scripting) | JavaScript æ‰§è¡Œ              |
| ç´«è‰²(Rendering) | æ ·å¼è®¡ç®—å’Œå¸ƒå±€ï¼Œå³é‡æ’       |
| ç»¿è‰²(Painting)  | æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€ï¼Œé‡ç»˜ |
| ç°è‰²(other)     | å…¶å®ƒäº‹ä»¶èŠ±è´¹çš„æ—¶é—´           |
| ç™½è‰²(Idle)      | ç©ºé—²æ—¶é—´                     |

> é‡ç»˜æ˜¯å½“èŠ‚ç‚¹éœ€è¦æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚æ”¹å˜ color å°±å«ç§°ä¸ºé‡ç»˜ å›æµ(é‡æ’)æ˜¯å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜å°±ç§°ä¸ºå›æµ
>
> é‡æ’å¿…å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘é‡æ’ã€‚é‡æ’æ‰€éœ€çš„æˆæœ¬æ¯”é‡ç»˜é«˜çš„å¤šï¼Œæ”¹å˜æ·±å±‚æ¬¡çš„èŠ‚ç‚¹å¾ˆå¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹çš„ä¸€ç³»åˆ—é‡æ’

js ä¿®æ”¹ dom ç»“æ„æˆ–æ ·å¼ -> è®¡ç®— style -> layout(é‡æ’) -> paint(é‡ç»˜) -> composite(åˆæˆ)

justwe7.github.io/æ€§èƒ½ä¼˜åŒ–çš„ç›¸å…³æ€»ç»“

#### NET

æ¯æ¡å½©è‰²æ¨ªæ è¡¨ç¤ºä¸€ç§èµ„æºã€‚æ¨ªæ è¶Šé•¿ï¼Œæ£€ç´¢èµ„æºæ‰€éœ€çš„æ—¶é—´è¶Šé•¿ã€‚ æ¯ä¸ªæ¨ªæ çš„æµ…è‰²éƒ¨åˆ†è¡¨ç¤ºç­‰å¾…æ—¶é—´ï¼ˆä»è¯·æ±‚èµ„æºåˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸‹è½½å®Œæˆçš„æ—¶é—´ï¼‰ æ·±è‰²éƒ¨åˆ†è¡¨ç¤ºä¼ è¾“æ—¶é—´ï¼ˆä¸‹è½½ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—èŠ‚ä¹‹é—´çš„æ—¶é—´ï¼‰

- HTMLï¼šè“è‰²
- CSSï¼šç´«è‰²
- JSï¼šé»„è‰²
- å›¾ç‰‡ï¼šç»¿è‰²

> æ„Ÿè§‰ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ç›´æ¥ä½¿ç”¨ network é¢æ¿å°±å¥½äº†

### (3)Flame Chart ç«ç„°å›¾ï¼ˆçº¿ç¨‹é¢æ¿ï¼‰

è¯¦ç»†çš„åˆ†ææŸäº›ä»»åŠ¡çš„è¯¦ç»†è€—æ—¶ï¼Œä»è€Œå®šä½é—®é¢˜

![img](./imgs/chrome_devtools_52.png)

#### çœ‹åˆ°çš„å‡ æ¡è™šçº¿ï¼š

![img](./imgs/chrome_devtools_53.gif)

- è“çº¿ä»£è¡¨ `DOMContentLoaded` äº‹ä»¶

- ç»¿çº¿ä»£è¡¨é¦–æ¬¡ç»˜åˆ¶çš„æ—¶é—´

- - FP(First Paint): é¦–æ¬¡ç»˜åˆ¶
  - FCP(First Contentful Paint)ï¼š ç¬¬ä¸€æ¬¡ä¸°å¯Œå†…å®¹çš„ç»˜å›¾
  - FMP(First Meaningful Paint)ï¼šç¬¬ä¸€æ¬¡æœ‰æ„ä¹‰çš„ç»˜å›¾
  - LCP(Largest Contentful Paint)ï¼š æœ€å¤§åŒºåŸŸå†…å®¹ç»˜åˆ¶

- çº¢çº¿ä»£è¡¨ `load` äº‹ä»¶

> - `DOMContentLoaded`: å°±æ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•ã€‚ é‚£ä»€ä¹ˆæ˜¯ dom å†…å®¹åŠ è½½å®Œæ¯•å‘¢ï¼Ÿæ‰“å¼€ä¸€ä¸ªç½‘é¡µå½“è¾“å…¥ä¸€ä¸ª URLï¼Œé¡µé¢çš„å±•ç¤ºé¦–å…ˆæ˜¯ç©ºç™½çš„ï¼Œç„¶åè¿‡ä¸€ä¼šï¼Œé¡µé¢ä¼šå±•ç¤ºå‡ºå†…å®¹ï¼Œä½†æ˜¯é¡µé¢çš„æœ‰äº›èµ„æºæ¯”å¦‚è¯´å›¾ç‰‡èµ„æºè¿˜æ— æ³•çœ‹åˆ°ï¼Œæ­¤æ—¶é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸çš„äº¤äº’ï¼Œè¿‡ä¸€æ®µæ—¶é—´åï¼Œå›¾ç‰‡æ‰å®Œæˆæ˜¾ç¤ºåœ¨é¡µé¢ã€‚ä»é¡µé¢ç©ºç™½åˆ°å±•ç¤ºå‡ºé¡µé¢å†…å®¹ï¼Œä¼šè§¦å‘ `DOMContentLoaded` äº‹ä»¶ã€‚è€Œè¿™æ®µæ—¶é—´å°±æ˜¯ HTML æ–‡æ¡£è¢«åŠ è½½å’Œè§£æå®Œæˆã€‚
> - `load`: é¡µé¢ä¸Šæ‰€æœ‰çš„èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ç­‰ï¼‰è¢«åŠ è½½ä»¥åæ‰ä¼šè§¦å‘ load äº‹ä»¶ï¼Œç®€å•æ¥è¯´ï¼Œé¡µé¢çš„ load äº‹ä»¶ä¼šåœ¨ `DOMContentLoaded` è¢«è§¦å‘ä¹‹åæ‰è§¦å‘ã€‚

#### Main

çœ‹ä¸‹ä¸»çº¿ç¨‹ï¼ŒDevtools å±•ç¤ºäº†ä¸»çº¿ç¨‹è¿è¡ŒçŠ¶å†µ

- X è½´ä»£è¡¨ç€æ—¶é—´ã€‚æ¯ä¸ªé•¿æ¡ä»£è¡¨ç€ä¸€ä¸ª eventã€‚é•¿æ¡è¶Šé•¿å°±ä»£è¡¨è¿™ä¸ª event èŠ±è´¹çš„æ—¶é—´è¶Šé•¿ã€‚
- Y è½´ä»£è¡¨äº†è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ã€‚åœ¨æ ˆé‡Œï¼Œä¸Šé¢çš„ event è°ƒç”¨äº†ä¸‹é¢çš„ event

Google å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­ï¼š

![img](./imgs/chrome_devtools_54.png)

å¦‚ä¸Šå›¾ï¼šclick äº‹ä»¶è§¦å‘äº† `script_foot_closure.js` ç¬¬ 53 è¡Œçš„å‡½æ•°è°ƒç”¨ã€‚ å†çœ‹ä¸‹é¢ï¼ŒFunction Call å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåŒ¿åå‡½æ•°è¢«è°ƒç”¨ï¼Œç„¶åè°ƒç”¨ Me() å‡½æ•°ï¼Œç„¶åè°ƒç”¨ Se()ï¼Œä¾æ­¤ç±»æ¨ã€‚

> DevTools ä¸ºè„šæœ¬åˆ†é…éšæœºé¢œè‰²ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæ¥è‡ªä¸€ä¸ªè„šæœ¬çš„å‡½æ•°è°ƒç”¨æ˜¾ç¤ºä¸ºæµ…ç»¿è‰²ã€‚æ¥è‡ªå¦ä¸€ä¸ªè„šæœ¬çš„è°ƒç”¨è¢«æ¸²æŸ“æˆç±³è‰²ã€‚è¾ƒæ·±çš„é»„è‰²è¡¨ç¤ºè„šæœ¬æ´»åŠ¨ï¼Œè€Œç´«è‰²çš„äº‹ä»¶è¡¨ç¤ºæ¸²æŸ“æ´»åŠ¨ã€‚è¿™äº›è¾ƒæš—çš„é»„è‰²å’Œç´«è‰²äº‹ä»¶åœ¨æ‰€æœ‰è®°å½•ä¸­éƒ½æ˜¯ä¸€è‡´çš„ã€‚

![img](./imgs/chrome_devtools_55.gif)

1. åœ¨æ€§èƒ½æŠ¥å‘Šä¸­ï¼Œæœ‰å¾ˆå¤šçš„æ•°æ®ã€‚å¯ä»¥é€šè¿‡åŒå‡»ï¼Œæ‹–åŠ¨ç­‰ç­‰åŠ¨ä½œæ¥æ”¾å¤§ç¼©å°æŠ¥å‘ŠèŒƒå›´ï¼Œä»å„ç§æ—¶é—´æ®µæ¥è§‚å¯Ÿåˆ†ææŠ¥å‘Š
2. åœ¨äº‹ä»¶é•¿æ¡çš„å³ä¸Šè§’å¤„ï¼Œå¦‚æœå‡ºç°äº†çº¢è‰²å°ä¸‰è§’ï¼Œè¯´æ˜è¿™ä¸ªäº‹ä»¶æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„
3. åŒå‡»è¿™ä¸ªå¸¦æœ‰çº¢è‰²å°ä¸‰è§’çš„äº‹ä»¶ã€‚åœ¨ Summary é¢æ¿ä¼šçœ‹åˆ°è¯¦ç»†ä¿¡æ¯ã€‚æ³¨æ„ reveal è¿™ä¸ªé“¾æ¥ï¼ŒåŒå‡»å®ƒä¼šè®©é«˜äº®è§¦å‘è¿™ä¸ªäº‹ä»¶çš„ eventã€‚å¦‚æœç‚¹å‡»äº† app.js:94 è¿™ä¸ªé“¾æ¥ï¼Œå°±ä¼šè·³è½¬åˆ°å¯¹åº”çš„ä»£ç å¤„

### (4)Details åŒºåŸŸ

ä¸€èˆ¬è¦é…åˆ `Flame Chart` ä¸€èµ·ä½¿ç”¨

- `Summary` åŒºåŸŸæ˜¯ä¸€ä¸ªé¥¼çŠ¶å›¾æ€»è§ˆï¼Œæ±‡æ€»äº†å„ä¸ªäº‹ä»¶ç±»å‹æ‰€è€—è´¹çš„æ€»æ—¶é•¿ï¼Œå¦å¤–è¿˜æœ‰ä¸‰ä¸ªæŸ¥çœ‹é€‰é¡¹ï¼š
- `Bottom-Up` é€‰é¡¹å¡ï¼šè¦æŸ¥çœ‹ç›´æ¥èŠ±è´¹æœ€å¤šæ—¶é—´çš„æ´»åŠ¨æ—¶ä½¿ç”¨
- `Call Tree` é€‰é¡¹å¡ï¼šæƒ³æŸ¥çœ‹å¯¼è‡´æœ€å¤šå·¥ä½œçš„æ ¹æ´»åŠ¨æ—¶ä½¿ç”¨
- `Event Log` é€‰é¡¹å¡ï¼šæƒ³è¦æŒ‰è®°å½•æœŸé—´çš„æ´»åŠ¨é¡ºåºæŸ¥çœ‹æ´»åŠ¨æ—¶ä½¿ç”¨

### window.performance å¯¹è±¡

> Performance æ¥å£å¯ä»¥è·å–åˆ°å½“å‰é¡µé¢ä¸­ä¸æ€§èƒ½ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒæ˜¯ High Resolution Time API çš„ä¸€éƒ¨åˆ†ï¼ŒåŒæ—¶ä¹Ÿèåˆäº† Performance Timeline APIã€Navigation Timing APIã€ User Timing API å’Œ Resource Timing APIã€‚
>
> å®è´¨ä¸Šæ¥è¯´ performance å¯¹è±¡å°±æ˜¯ä¸“é—¨ç”¨äºæ€§èƒ½ç›‘æµ‹çš„å¯¹è±¡ï¼Œå†…ç½®äº†å‡ ä¹æ‰€æœ‰å¸¸ç”¨å‰ç«¯éœ€è¦çš„æ€§èƒ½å‚æ•°ç›‘æ§

#### å‡ ä¸ªå®ç”¨çš„ API

##### performance.now()æ–¹æ³•

`performance.now()` è¿”å› `performance.navigationStart` è‡³å½“å‰çš„æ¯«ç§’æ•°ã€‚`performance.navigationStart` æ˜¯ä¸‹æ–‡å°†ä»‹ç»åˆ°çš„å¯ä»¥è¯´æ˜¯æµè§ˆå™¨è®¿é—®æœ€åˆçš„æ—¶é—´æµ‹é‡ç‚¹ã€‚

å€¼å¾—æ³¨æ„çš„ä¸¤ç‚¹ï¼š

- æµ‹é‡åˆå§‹ç‚¹æ˜¯æµè§ˆå™¨è®¿é—®æœ€åˆæµ‹é‡ç‚¹ï¼Œæˆ–è€…ç†è§£ä¸ºåœ¨åœ°å€æ è¾“å…¥ URL åæŒ‰å›è½¦çš„é‚£ä¸€ç¬é—´ã€‚
- è¿”å›å€¼æ˜¯æ¯«ç§’æ•°ï¼Œä½†å¸¦æœ‰ç²¾å‡†çš„å¤šä½å°æ•°ã€‚

ç”¨ performance.now()æ£€æµ‹ js ä»£ç çš„æ‰§è¡Œæ—¶é—´(æ¯«ç§’):

```
  var st = performance.now();
  console.log(Array(9999999).fill(null).filter(v => !v).length);
  var end = performance.now();
  console.log(`å–å€¼æ—¶é—´${end - st}ms`); // å–å€¼æ—¶é—´ 558.7849999992759ms
```

#### performance.navigation

performance.navigation è´Ÿè´£çºªå½•ç”¨æˆ·è¡Œä¸ºä¿¡æ¯ï¼Œåªæœ‰ä¸¤ä¸ªå±æ€§:

- `redirectCount`

- - å¦‚æœæœ‰é‡å®šå‘çš„è¯ï¼Œé¡µé¢é€šè¿‡å‡ æ¬¡é‡å®šå‘è·³è½¬è€Œæ¥

- `type`

- - type çš„å€¼ï¼š
  - 0  å³ `TYPE_NAVIGATENEXT` æ­£å¸¸è¿›å…¥é¡µé¢ï¼ˆéåˆ·æ–°ã€éé‡å®šå‘ç­‰)
  - 1  å³ `TYPE_RELOAD` é€šè¿‡ window.location.reload()åˆ·æ–°çš„é¡µé¢
  - 2  å³ `TYPE_BACK_FORWARD` é€šè¿‡æµè§ˆå™¨çš„å‰è¿›åé€€æŒ‰é’®è¿›å…¥çš„é¡µé¢ï¼ˆå†å²è®°å½•ï¼‰
  - 255 å³ `TYPE_UNDEFINED` éä»¥ä¸Šæ–¹å¼è¿›å…¥çš„é¡µé¢

```
  console.log(performance.navigation); // PerformanceNavigation {type: 1, redirectCount: 0}
```

##### performance.timing

`timing` å†…åŒ…å«äº†å‡ ä¹æ‰€æœ‰æ—¶åºçš„æ—¶é—´èŠ‚ç‚¹

å¯ä»¥é€šè¿‡æ­¤å­—æ®µæ¥ç»Ÿè®¡é¡µé¢ç›¸å…³äº‹ä»¶çš„å‘ç”Ÿæ—¶é•¿ï¼š

```
function getTiming() {
  try {
    var timing = performance.timing;
    var timingObj = {};

    var loadTime = (timing.loadEventEnd - timing.loadEventStart) / 1000;

    if(loadTime < 0) {
      setTimeout(function() {
        getTiming();
      }, 0);
      return;
    }

    timingObj['é‡å®šå‘æ—¶é—´'] = (timing.redirectEnd - timing.redirectStart);
    timingObj['DNS è§£ææ—¶é—´'] = (timing.domainLookupEnd - timing.domainLookupStart);
    timingObj['TCP å®Œæˆæ¡æ‰‹æ—¶é—´'] = (timing.connectEnd - timing.connectStart);
    timingObj['HTTP è¯·æ±‚å“åº”å®Œæˆæ—¶é—´'] = (timing.responseEnd - timing.requestStart);
    timingObj['DOM å¼€å§‹åŠ è½½å‰æ‰€èŠ±è´¹æ—¶é—´'] = (timing.responseEnd - timing.navigationStart);
    timingObj['DOM åŠ è½½å®Œæˆæ—¶é—´'] = ((timing.domComplete || timing.domLoading) - timing.domLoading);
    timingObj['DOM ç»“æ„è§£æå®Œæˆæ—¶é—´'] = (timing.domInteractive - timing.domLoading);
    timingObj['æ€»ä½“ç½‘ç»œäº¤äº’è€—æ—¶ï¼Œå³å¼€å§‹è·³è½¬åˆ°æœåŠ¡å™¨èµ„æºä¸‹è½½å®Œæˆæ—¶é—´'] = (timing.responseEnd - timing.navigationStart);
    timingObj['å¯äº¤äº’çš„æ—¶é—´'] = (timing.domContentLoadedEventEnd - timing.domContentLoadedEventStart);
    timingObj['é¦–æ¬¡å‡ºç°å†…å®¹'] = (timing.domLoading - timing.navigationStart);
    timingObj['onload äº‹ä»¶æ—¶é—´'] = (timing.loadEventEnd - timing.loadEventStart);
    timingObj['é¡µé¢å®Œå…¨åŠ è½½æ—¶é—´'] = (timingObj['é‡å®šå‘æ—¶é—´'] + timingObj['DNS è§£ææ—¶é—´'] + timingObj['TCP å®Œæˆæ¡æ‰‹æ—¶é—´'] + timingObj['HTTP è¯·æ±‚å“åº”å®Œæˆæ—¶é—´'] + timingObj['DOM ç»“æ„è§£æå®Œæˆæ—¶é—´'] + timingObj['DOM åŠ è½½å®Œæˆæ—¶é—´']);

    for(item in timingObj) {
      console.log(item + ":" + timingObj[item] + '(ms)');
    }

    console.log(performance.timing);

  } catch(e) {
    console.log(performance.timing);
  }
}
window.onload = getTiming
```

##### performance.memory

ç”¨äºæ˜¾ç¤ºå½“å‰çš„å†…å­˜å ç”¨æƒ…å†µ

```
console.log(performance.memory)
/* {
  jsHeapSizeLimit: 4294705152,
  totalJSHeapSize: 13841857,
  usedJSHeapSize: 12417637
} */
```

- usedJSHeapSize è¡¨ç¤ºï¼šJS å¯¹è±¡ï¼ˆåŒ…æ‹¬ V8 å¼•æ“å†…éƒ¨å¯¹è±¡ï¼‰å ç”¨çš„å†…å­˜æ•°
- totalJSHeapSize è¡¨ç¤ºï¼šå¯ä½¿ç”¨çš„å†…å­˜
- jsHeapSizeLimit è¡¨ç¤ºï¼šå†…å­˜å¤§å°é™åˆ¶

> é€šå¸¸ï¼Œ`usedJSHeapSize` ä¸èƒ½å¤§äº `totalJSHeapSize`ï¼Œå¦‚æœå¤§äºï¼Œæœ‰å¯èƒ½å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚

##### performance.getEntries()

æµè§ˆå™¨è·å–ç½‘é¡µæ—¶ï¼Œä¼šå¯¹ç½‘é¡µä¸­æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆè„šæœ¬æ–‡ä»¶ã€æ ·å¼è¡¨ã€å›¾ç‰‡æ–‡ä»¶ç­‰ç­‰ï¼‰å‘å‡ºä¸€ä¸ª HTTP è¯·æ±‚ã€‚`performance.getEntries` æ–¹æ³•ä»¥æ•°ç»„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ª `PerformanceEntry` åˆ—è¡¨ï¼Œè¿™äº›è¯·æ±‚çš„æ—¶é—´ç»Ÿè®¡ä¿¡æ¯ï¼Œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ï¼Œè¿”å›æ•°ç»„å°±ä¼šæœ‰å¤šå°‘ä¸ªæˆå‘˜

- `name`ï¼šèµ„æºçš„é“¾æ¥

- `duration`: èµ„æºçš„æ€»è€—æ—¶ï¼ˆåŒ…æ‹¬ç­‰å¾…æ—¶é•¿ï¼Œè¯·æ±‚æ—¶é•¿ï¼Œå“åº”æ—¶é•¿ ç›¸å½“äº responseEnd - startTimeï¼‰

- `entryType`: èµ„æºç±»å‹ï¼ŒentryType ç±»å‹ä¸åŒæ•°ç»„ä¸­çš„å¯¹è±¡ç»“æ„ä¹Ÿä¸åŒ:

  | å€¼         | è¯¥ç±»å‹å¯¹è±¡                  | æè¿°                                                         |
  | :--------- | :-------------------------- | :----------------------------------------------------------- |
  | mark       | PerformanceMark             | é€šè¿‡ mark()æ–¹æ³•æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å¯¹è±¡                            |
  | measure    | PerformanceMeasure          | é€šè¿‡ measure()æ–¹æ³•æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å¯¹è±¡                         |
  | paint      | PerformancePaintTiming      | å€¼ä¸º first-paint'é¦–æ¬¡ç»˜åˆ¶ã€'first-contentful-paint'é¦–æ¬¡å†…å®¹ç»˜åˆ¶ã€‚ |
  | resource   | PerformanceResourceTiming   | æ‰€æœ‰èµ„æºåŠ è½½æ—¶é—´ï¼Œç”¨å¤„æœ€å¤š                                   |
  | navigation | PerformanceNavigationTiming | ç°é™¤ chrome å’Œ Opera å¤–å‡ä¸æ”¯æŒï¼Œå¯¼èˆªç›¸å…³ä¿¡æ¯                |
  | frame      | PerformanceFrameTiming      | ç°æµè§ˆå™¨å‡æœªæ”¯æŒ                                             |

- `initiatorType`: å¦‚ä½•å‘èµ·çš„è¯·æ±‚,åˆå§‹ç±»å‹ï¼ˆæ³¨æ„è¿™ä¸ªç±»å‹å¹¶ä¸å‡†ç¡®ï¼Œä¾‹å¦‚åœ¨ css ä¸­çš„å›¾ç‰‡èµ„æºä¼šè¿™ä¸ªå€¼æ˜¾ç¤º cssï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èç”¨ name ä¸­çš„åç¼€åï¼‰

  | å‘èµ·å¯¹è±¡                             | å€¼                        | æè¿°                                                         |
  | :----------------------------------- | :------------------------ | :----------------------------------------------------------- |
  | a Element                            | link/script/img/iframe ç­‰ | é€šè¿‡æ ‡ç­¾å½¢å¼åŠ è½½çš„èµ„æºï¼Œå€¼æ˜¯è¯¥èŠ‚ç‚¹åçš„å°å†™å½¢å¼               |
  | a CSS resource                       | css                       | é€šè¿‡ css æ ·å¼åŠ è½½çš„èµ„æºï¼Œæ¯”å¦‚ background çš„ url æ–¹å¼åŠ è½½èµ„æº |
  | a XMLHttpRequest object              | xmlhttprequest/fetch      | é€šè¿‡ xhr åŠ è½½çš„èµ„æº                                          |
  | a PerformanceNavigationTiming object | navigation                | å½“å¯¹è±¡æ˜¯ PerformanceNavigationTiming æ—¶è¿”å›                  |

##### performance.getEntriesByType()

æ–¹æ³•è¿”å›ç»™å®šç±»å‹çš„ getEntries åˆ—è¡¨æ‰“å¼€é¡µé¢ï¼ˆjustwe7.github.io/devtools/network/queue.htmlï¼‰

> è¿™æ®µä»£ç å¯ä»¥åœ¨ DevTools æ§åˆ¶å°ä¸­è¿è¡Œã€‚å®ƒå°†ä½¿ç”¨`Resource Timing API`(èµ„æºæ—¶åº API)æ¥æ£€ç´¢æ‰€æœ‰èµ„æºã€‚ç„¶åå®ƒè¿‡æ»¤æ¡ç›®ï¼ŒæŸ¥æ‰¾åŒ…å«`logo-1024px.png`åç§°çš„æ¡ç›®ã€‚å¦‚æœæ‰¾åˆ°ï¼Œä¼šè¿”å›ç›¸å…³ä¿¡æ¯ã€‚

```
performance
  .getEntriesByType('resource')
  .filter(item => item.name.includes('logo-1024px.png'))
```

æ³¨æ„:
è¿”å›èµ„æºçš„ `connectEnd` ç­‰ç›¸å…³å­—æ®µä¸æ˜¯ `Unix` æ—¶é—´æˆ³ï¼Œè€Œæ˜¯ `DOMHighResTimeStamp`ã€‚ MDN PerformanceResourceTiming

> `DOMHighResTimeStamp` æ˜¯ä¸€ä¸ª double ç±»å‹ï¼Œç”¨äºå­˜å‚¨æ—¶é—´å€¼ã€‚è¯¥å€¼å¯ä»¥æ˜¯ç¦»æ•£çš„æ—¶é—´ç‚¹æˆ–ä¸¤ä¸ªç¦»æ•£æ—¶é—´ç‚¹ä¹‹é—´çš„æ—¶é—´å·®ã€‚T å•ä½ä¸ºæ¯«ç§’ ms (milliseconds) ï¼Œåº”å‡†ç¡®è‡³ 5 å¾®ç§’ Âµs (microseconds)ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨æ— æ³•æä¾›å‡†ç¡®åˆ° 5 å¾®ç§’çš„æ—¶é—´å€¼(ä¾‹å¦‚,ç”±äºç¡¬ä»¶æˆ–è½¯ä»¶çš„é™åˆ¶), æµè§ˆå™¨å¯ä»¥ä»¥æ¯«ç§’ä¸ºå•ä½çš„ç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´è¡¨ç¤ºè¯¥å€¼

## Lighthouse(Audits) é¢æ¿

> æ¥è‡ª Google çš„æè¿°ï¼š Lighthouse æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºæ”¹è¿›ç½‘ç»œåº”ç”¨çš„è´¨é‡ã€‚ æ‚¨å¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ª Chrome æ‰©å±•ç¨‹åºè¿è¡Œï¼Œæˆ–ä»å‘½ä»¤è¡Œè¿è¡Œã€‚ æ‚¨ä¸º Lighthouse æä¾›ä¸€ä¸ªæ‚¨è¦å®¡æŸ¥çš„ç½‘å€ï¼Œå®ƒå°†é’ˆå¯¹æ­¤é¡µé¢è¿è¡Œä¸€è¿ä¸²çš„æµ‹è¯•ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæœ‰å…³é¡µé¢æ€§èƒ½çš„æŠ¥å‘Š
>
> ä¼šå¯¹é¡µé¢çš„åŠ è½½è¿›è¡Œåˆ†æï¼Œç„¶åç»™å‡ºæé«˜é¡µé¢æ€§èƒ½çš„å»ºè®®

æ‡’äººä¸“ç”¨ğŸ‘

![img](./imgs/chrome_devtools_56.png)

æœ‰ 5 ä¸ªæŒ‡æ ‡:

- `Performance` æ€§èƒ½
- `accessibility` æ— éšœç¢ä½¿ç”¨
- `Best Practice` ç”¨æˆ·ä½“éªŒ
- `SEO` SEO ä¼˜åŒ–
- `Progressive Web App` é¡µå¯¹äº PWA çš„å…¼å®¹æ€§

## Security é¢æ¿

> ç”¨äºæ£€æµ‹å½“é¢é¡µé¢çš„å®‰å…¨æ€§

è¯¥é¢æ¿å¯ä»¥åŒºåˆ†ä¸¤ç§ç±»å‹çš„ä¸å®‰å…¨çš„é¡µé¢ï¼š

- å¦‚æœè¢«è¯·æ±‚çš„é¡µé¢é€šè¿‡ HTTP æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸»æºå°±ä¼šè¢«æ ‡è®°ä¸ºä¸å®‰å…¨ã€‚
- å¦‚æœè¢«è¯·æ±‚çš„é¡µé¢æ˜¯é€šè¿‡ HTTPS è·å–çš„ï¼Œä½†è¿™ä¸ªé¡µé¢æ¥ç€é€šè¿‡ HTTP ç»§ç»­ä»å…¶ä»–æ¥æºæ£€ç´¢å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢ä»ç„¶è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ··åˆå†…å®¹é¡µé¢,æ··åˆå†…å®¹é¡µé¢åªæ˜¯éƒ¨åˆ†å—åˆ°ä¿æŠ¤,å› ä¸º HTTP å†…å®¹(éåŠ å¯†çš„å†…å®¹é€šä¿¡ä½¿ç”¨æ˜æ–‡)å¯èƒ½ä¼šè¢«çªƒå¬,å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»ã€‚å¦‚ 163ï¼Œè™½ç„¶è¯ä¹¦æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯é¡µé¢æœ‰ä¸€éƒ¨åˆ† http èµ„æºï¼š
  ![img](./imgs/chrome_devtools_57.png)

## Command ç»ˆæå¤§æ‹›

åœ¨æ§åˆ¶å°æ‰“å¼€çš„çŠ¶æ€ä¸‹ï¼Œ ç»„åˆæŒ‰é”® `Ctrl + Shift + P` /  `Command + Shift + P` æ‰“å¼€â€œå‘½ä»¤â€èœå•ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºäº†~

### æˆªå›¾

å½“ä½ åªæƒ³å¯¹ä¸€ä¸ªç‰¹å®šçš„ `DOM` èŠ‚ç‚¹è¿›è¡Œæˆªå›¾æ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–å·¥å…·æ“ä½œå¥½ä¹…ï¼Œä½¿ç”¨æ§åˆ¶å°å¯ä»¥ç›´æ¥é€‰ä¸­æƒ³è¦æˆªå›¾çš„èŠ‚ç‚¹ï¼Œæ‰“å¼€ `Command` èœå•å¹¶ä¸”ä½¿ç”¨ `èŠ‚ç‚¹æˆªå›¾` å°±å¯ä»¥äº†

- æˆªå–ç‰¹å®šèŠ‚ç‚¹ï¼š `Screenshot Capture node screenshot`
- å…¨å±æˆªå›¾ï¼š `Screenshot Capture full size screenshot`

### CSS/JS è¦†ç›–ç‡

- æ‰“å¼€è°ƒè¯•é¢æ¿ï¼Œé€šè¿‡å‘½ä»¤èœå•è¾“å…¥ `Show Coverage` è°ƒå‡ºé¢æ¿
- ç‚¹å‡» `reload` æŒ‰é’®å¼€å§‹æ£€æµ‹![img](./imgs/chrome_devtools_58.png)
- ç‚¹å‡»ç›¸åº”æ–‡ä»¶å³å¯æŸ¥çœ‹å…·ä½“çš„è¦†ç›–æƒ…å†µï¼ˆè“è‰²çš„ä¸ºç”¨åˆ°çš„ä»£ç ï¼Œçº¢è‰²è¡¨ç¤ºæ²¡æœ‰ç”¨åˆ°çš„ä»£ç ï¼‰![img](./imgs/chrome_devtools_59.png)

### åª’ä½“æŸ¥è¯¢

åª’ä½“æŸ¥è¯¢æ˜¯è‡ªé€‚åº”ç½‘é¡µè®¾è®¡çš„åŸºæœ¬éƒ¨åˆ†ã€‚ åœ¨ Chrome Devtools ä¸­çš„è®¾å¤‡æ¨¡å¼ä¸‹ï¼Œåœ¨ä¸‰åœ†ç‚¹èœå•ç‚¹å‡», `Show Media queries` å³å¯å¯ç”¨ï¼š

> å³é”®ç‚¹å‡»æŸä¸ªæ¡å½¢ï¼ŒæŸ¥çœ‹åª’ä½“æŸ¥è¯¢åœ¨ CSS ä¸­ä½•å¤„å®šä¹‰å¹¶è·³åˆ°æºä»£ç ä¸­çš„å®šä¹‰

![img](./imgs/chrome_devtools_60.gif)

## å‚è€ƒ

- Chrome Network ï¼ŒSize å’Œ Time ä¸ºä»€ä¹ˆæœ‰ä¸¤è¡Œå‚æ•°
- Chrome å¼€å‘è€…å·¥å…·
- Google chrome-devtools
- Chrome devtools ä½¿ç”¨è¯¦è§£â€”â€”Performance
- å…¨æ–° Chrome Devtool Performance ä½¿ç”¨æŒ‡å—
- Chrome-performance é¡µé¢æ€§èƒ½åˆ†æä½¿ç”¨æ•™ç¨‹
- MDN Performance
- ç½‘é¡µæ€§èƒ½æ£€æµ‹-performance
- æµè§ˆå™¨æ¸²æŸ“è¯¦ç»†è¿‡ç¨‹
- chrome è®¾ç½®æ–­ç‚¹çš„å„ç§å§¿åŠ¿
- Network Summary
